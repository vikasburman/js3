/*! JS3 - JavaScript Style Sheet  
 *  Version 0.3.6 (Build 23-02-2014) 
 *  Copyright (C) 2014 Vikas Burman. All rights reserved. 
 * 
 *  Project: https://github.com/vikasburman/js3 
 *  License: https://raw.github.com/vikasburman/js3/master/LICENSE.md 
 *  Commercial: http://www.vikasburman.com/js3 
 */ 
!function(){"use strict";var a={NAME:"JS3",TITLE:"JavaScript Style Sheets",VERSION:"0.3.6",COPYRIGHT:"Copyright (C) 2014 Vikas Burman. All rights reserved.",URL:"https://github.com/vikasburman/js3"},b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"function"==typeof a},d=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},e=function(a,e){var f=this,g="$STYLES$",h="$SELS$",i="$VALUE$",j="invalid argument",k=" already defined",l=" cannot be applied",m=[],n=null,o="",p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v=[],w={pfx:"prefix",vars:"variable",rule:"rule",style:"style",sel:"selector",at:"at",dir:"dir"},x={cs:"charset",doc:"document",ff:"font-face",imp:"import",med:"media",ns:"namespace",pg:"page",kf:"keyframes",sup:"supports"},y={charset:'@charset "'+i+'";',"font-face":"@font-face {"+h+"}","import":"@import "+i+";",namespace:"@namespace "+i+";",page:"@page "+i+" {"+h+"}",media:"@media "+i+" {"+h+"}",document:"@document "+i+" {"+h+"}",keyframes:"@keyframes "+i+" {"+h+"}",supports:"@supports "+i+" {"+h+"}"},z=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"_"+a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()},A=function(){return"js3_"+e+z()},B=function(a){var b="",c=null,d=0;for(d=0;d<a.length;++d)c=a[d],c.isOn()&&(b+=" "+c.apply(f));return b},C=function(){var a="",b=null,c=null,d=null,e="",i=null,j="",k="",n=0,o="",p="",q="",r=0,s=0,t="";for(n=0;n<m.length;++n){switch(b=m[n],e="",b.type){case w.sel:if(d=b.item,d.isOn()&&(p=d.apply(f),j=p.replace(g,B(d.styles())))){if(d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&v.length>0)for(r=0;r<v.length;++r)t=v[r],j+=t+" "+j;e=j}break;case w.at:if(c=b.item,c.isOn())if(q=c.apply(f),c.raw.canEmbedSels()){for(j="",o="",i=c.sels.apply(f),r=0;r<i.length;++r)if(o=i[r],c.raw.hasSpecialSelectors())d=null,p=o+" {"+g+"}",k=B(c.styles(o)),k&&(j+=p.replace(g,k));else if(d=f.sel[o],d.isOn()&&(p=d(),k=B(c.styles(o)),k&&(j+=p.replace(g,k),d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&v.length>0)))for(s=0;s<v.length;++s)t=v[s],j+=t+" "+j;j&&(e=q.replace(h,j))}else e=q;break;case w.dir:e="string"==typeof b.item?b.item:b.item.apply(f);break;default:throw b.item.fName()+l}a+=e?" "+e:""}return a},D=function(){var a=o;o=A();var b=window.document.createElement("style");if(b.id=o,b.innerHTML=C(),window.document.getElementsByTagName("head")[0].appendChild(b),a){var c=window.document.getElementById(a);c.parentNode.removeChild(c)}p=!0,r=!1},E=function(){if(p){var a=window.document.getElementById(o);a.parentNode.removeChild(a),o="",p=!1,r=!0}},F=function(a,b,c){r=!0,p&&f.parent.settings.isLogChanges&&window.console.log(a.toString()+" new style"+(a>1?"s are":" is")+" added to "+b+' "'+c+'".'),p&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"stylesAdded"}))},G=function(a,b,c){r=!0,p&&f.parent.settings.isLogChanges&&window.console.log('Style "'+a+'" is removed from '+b+' "'+c+'".'),p&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"styleRemoved"}))},H=function(a,b,c,d){r=!0,p&&f.parent.settings.isLogChanges&&window.console.log("Value of "+a+' "'+b+'" is changed from "'+c+'" to "'+d+'".'),p&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"valueChanged"}))},I=function(a,b,c,d){r=!0,p&&f.parent.settings.isLogChanges&&window.console.log("Inclusion status of "+a+' "'+b+'" is changed from "'+c+'" to "'+d+'".'),p&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"statusChanged"}))},J=function(a){var b=function(){return null};return a&&(b=c(a)?function(){var b=a.apply(f);return b}:function(){var b=a;return b}),b.plain=function(){return b(!0)},b},K=function(a){var b=function(){return null};return a&&(b=c(a)?function(){var b=a.apply(f);return b}:function(){var b=a;return b}),b.plain=function(){return b(!0)},b},L=function(a,e,g){var h=function(){return""};return a&&(h=c(a)?e?b(e)?function(b){var d="",h=a.apply(f);return h<=e.length&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:d(e)?function(b){var d="",h=a.apply(f);return e[h]&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:function(b){var d=a.apply(f);return d&&(d=c(e)&&!b?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}:function(){var b=a.apply(f);return b}:function(b){var d=a;return d&&e&&!b&&(d=c(e)?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}),h.plain=function(){return h(!0)},h.last={},h.last.valueOrValueFuncOrCondFunc=a,h.last.valueSuffixOrValueArrayOrValueLiteral=e,h.last.valueSuffixOrFuncOrNone=g,h},M=function(a,e){var g=function(){return[]},h=function(a){return a||(a=[]),b(a)||(a=[a]),a};if(a)if(c(a))if(e)if(b(e))g=function(){var b=[],c=a.apply(f);return c<=e.length&&(b=h(e[c])),b};else{if(!d(e))throw j;g=function(){var b=[],c=a.apply(f);return e[c]&&(b=h(e[c])),b}}else g=c(a.type)&&a.type()===w.rule?function(){var b=h(a);return b}:function(){var b=h(a.apply(f));return b};else{if(!b(a))throw j;g=function(){var b=a;return b}}return g.plain=function(){return g()},g.last={},g.last.ruleArrayOrRuleArrayFuncOrCondFunc=a,g.last.ruleArrayOrRuleLiteral=e,g},N=function(a){var d=function(){return""},e=function(a){return a+" {"+g+"}"};return a&&(d=c(a)?function(b){var c=a.apply(f);return c&&!b&&(c=e(c)),c}:b(a)?function(b){var c=0,d="";for(c=0;c<a.length;++c)d?d+=", "+a[c]:d=a[c];return d&&!b&&(d=e(d)),d}:function(b){var c=a;return c&&!b&&(c=e(c)),c}),d.plain=function(){return d(!0)},d},O=function(a){var b=function(){return""};return arguments.length>0&&(b=c(a)?function(){var b=a.apply(f).toString();return b}:function(){var b=a.toString();return b}),b.plain=function(){return b(!0)},b},P=function(a,b){var c=function(c){if(c){var d=b();b=K(c),H(w.pfx,a,d,b())}return b()},d=z(),e=!0;return c.id=function(){return d},c.type=function(){return w.pfx},c.fName=function(){return a},c.off=function(){e&&(e=!1,n=null,I(w.pfx,a,"on","off"))},c.on=function(){e||(e=!0,n=null,I(w.pfx,a,"off","on"))},c.isOn=function(){return e},c.raw={},c.raw.value=function(){return b.plain()},c.raw.type=function(){return typeof c.raw.value()},f.parent.ex.me(f,c,w.pfx,c.raw.type(),""),c},Q=function(a,b){var c=function(c){if(c){var d=b();b=J(c),H(w.vars,a,d,b())}return b()},d=z();return c.id=function(){return d},c.type=function(){return w.vars},c.fName=function(){return a},c.raw={},c.raw.value=function(){return b.plain()},c.raw.type=function(){return typeof c.raw.value()},f.parent.ex.me(f,c,w.vars,c.raw.type(),""),c},R=function(a,b,d,e){var g=function(a){if(a&&(a=a.toString()),!a)return"";a.substr(a.length-1!==";")&&(a+=";");var e=d+":"+a;if(b){if(!n){var g=null,h="";n=[];for(h in f.pfx)f.pfx.hasOwnProperty(h)&&(g=f.pfx[h],c(g.type)&&g.isOn()&&n.push(g.apply(f)))}var i=0;for(i=0;i<n.length;++i)e=n[i]+d+":"+a+e}return e},h=function(b,c,d){if(arguments.length>0){var f=g(e());c||(c=e.last.valueSuffixOrValueArrayOrValueLiteral),d||(d=e.last.valueSuffixOrFuncOrNone),e=L(b,c,d),H(w.rule,a,f,g(e()))}return g(e())},i=z(),j=!0;return h.id=function(){return i},h.type=function(){return w.rule},h.fName=function(){return a},h.off=function(){j&&(j=!1,I(w.rule,a,"on","off"))},h.on=function(){j||(j=!0,I(w.rule,a,"off","on"))},h.isOn=function(){return j},h.raw={},h.raw.property=function(){return d},h.raw.hasPrefixes=function(){return b},h.raw.value=function(){return e.plain()},h.raw.type=function(){return typeof h.raw.value()},h.raw.suffix=function(){var a=e(),b=h.prop.value();return a.replace(b,"")},f.parent.ex.me(f,h,w.rule,h.raw.type(),d),h},S=function(a,c){var d=function(a){var b="",c=0,d=null;for(c=0;c<a.length;++c)d=a[c],d.isOn()&&(b+=d.apply(f));return b},e=function(b,e){if(arguments.length>0){var f=d(c());e||(e=c.last.ruleArrayOrRuleLiteral),c=M(b,e),H(w.style,a,f,d(c()))}return d(c())},g=z(),h=!0;return e.id=function(){return g},e.type=function(){return w.style},e.fName=function(){return a},e.off=function(){h&&(h=!1,I(w.style,a,"on","off"))},e.on=function(){h||(h=!0,I(w.style,a,"off","on"))},e.isOn=function(){return h},e.rules=function(){return c.plain()},e.rules.add=function(a,d){var f=c.plain();f=b(f)?f.slice(0):[f],a=b(a)?a:[a],f=d?a.concat(f):f.concat(a),e(f)},e.rules.remove=function(a){var d=c.plain();d=b(d)?d.slice(0):[d];for(var f=0,g=null,h=a.id(),i=-1,j=!1;;){for(i=-1,f=0;f<d.length;++f)if(g=d[f],g.id()===h){i=f;break}if(-1===i)break;d.splice(i,1),j=!0}j&&e(d)},e.rules.remove.all=function(){e([])},e.raw={},e.raw.value=function(){return c.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,w.style,"",""),e},T=function(a,c,d){c=c||!1;var e=function(b){if(b){var c=d();d=N(b),H(w.sel,a,c,d())}return d()},g=z(),h=[],i=!0;return e.id=function(){return g},e.type=function(){return w.sel},e.fName=function(){return a},e.off=function(){i&&(i=!1,I(w.sel,a,"on","off"))},e.on=function(){i||(i=!0,I(w.sel,a,"off","on"))},e.isOn=function(){return i},e.styles=function(){return h},e.styles.value=function(){return B(e.styles())},e.styles.add=function(c){c=b(c)?c:[c],h=h.concat(c),F(c.length,w.sel,a)},e.styles.remove=function(b){for(var c=0,d=b.id(),e=b.fName(),f=-1,g=!1;;){for(f=-1,c=0;c<h.length;++c)if(h[c].id()===d){f=c;break}if(-1===f)break;h.splice(f,1),g=!0}g&&G(e,w.sel,a)},e.styles.remove.all=function(){h.length=0,G("All styles",w.sel,a)},e.raw={},e.raw.canBeScoped=function(){return c},e.raw.value=function(){return d.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,w.sel,"",""),e},U=function(a,c,d){var e=y[c.toLowerCase()];if(!e)throw j;var g=-1!==e.indexOf(h),k=function(a){return a=a||"",e.replace(i,a)},l=function(b){if(b){var c=k(d());d=O(b),H(w.at,a,c,k(d()))}return k(d())},m=z(),n={},o=!0;return l.id=function(){return m},l.type=function(){return w.at},l.fName=function(){return a},l.off=function(){o&&(o=!1,I(w.at,a,"on","off"))},l.on=function(){o||(o=!0,I(w.at,a,"off","on"))},l.isOn=function(){return o},g&&(l.sels=function(){var a=[],b="";for(b in n)n.hasOwnProperty(b)&&a.push(b);return a},l.sels.define=function(b){n=b,F("New selectors and styles",w.at,a)},l.sels.add=function(b,c){var d="string"==typeof b?b:b.fName();n[d]=n[d]?n[d].concat(c):c,F(c.length,w.sel,d+" (under "+a+")")},l.sels.remove=function(c,d){var e="string"==typeof c?c:c.fName();if(n[e]){var f=0,g=b(n[e])?n[e]:[];if(g.length>0){for(var h=d.fName(),i=-1,j=!1;;){for(i=-1,f=0;f<g.length;++f)if(g[f].fName()===h){i=f;break}if(-1===i)break;g.splice(i,1),j=!0}j&&(n[e]=g,G(h,w.sel,e+" (under "+a+")"))}}},l.sels.remove.all=function(){n={},G("All styles",w.at,a)},l.styles=function(a){var c=[];return n[a]&&(c=n[a]),b(c)?c:[c]},l.styles.value=function(a){return B(l.styles(a))},l.styles.add=function(a,b){return l.sels.add(a,b)},l.styles.remove=function(a,b){return l.sels.remove(a,b)},l.styles.remove.all=function(b){var c="string"==typeof b?b:b.id();c?n[c]&&(n[c]=[],G("All styles",w.sel,c+" (under "+a+")")):l.sels.remove.all()}),l.raw={},l.raw.rule=function(){return c},l.raw.canEmbedSels=function(){return g},l.raw.hasSpecialSelectors=function(){return c===x.kf},l.raw.value=function(){return d.plain()},l.raw.type=function(){return typeof l.raw.value()},f.parent.ex.me(f,l,w.at,"",c),l};f.xref=function(){return arguments.length>0&&(f.parent.xref(e,Array.prototype.slice.call(arguments,0)),q=!0),f},f.rule=function(a,b,c,d,e){var f=!1;return"string"==typeof a?(d&&(e=d),c&&(d=c),b&&(c=b),b=a,f=!1):f=a,R(z(),f,b,L(c,d,e))},f.style=function(a,b){return S(z(),M(a,b))},f.pfx=function(a,b){if(2===arguments.length){if(f.pfx[a])throw a+k;f.pfx[a]=P(a,K(b))}else if(d(a)){var c=null;for(c in a)if(a.hasOwnProperty(c)){if(f.pfx[c])throw c+k;f.pfx[c]=P(c,K(a[c]))}}return f},f.vars=function(a,b){if(2===arguments.length){if(f.vars[a])throw a+k;f.vars[a]=Q(a,J(b))}else if(d(a)){var c=null;for(c in a)if(a.hasOwnProperty(c)){if(f.vars[c])throw c+k;f.vars[c]=Q(c,J(a[c]))}}return f},f.sel=function(a,b,c){if(f.sel[a])throw a+k;return f.sel[a]=T(a,c,N(b)),f},f.rules=function(a,b,c,d,e,g){if(f.rules[a])throw a+k;var h=!1;return"string"==typeof b?(e&&(g=e),d&&(e=d),c&&(d=c),c=b,h=!1):h=b,f.rules[a]=R(a,h,c,L(d,e,g)),f},f.styles=function(a,b,c){if(f.styles[a])throw a+k;return f.styles[a]=S(a,M(b,c)),f},f.at=function(a,b,c){if(f.at[a])throw a+k;var d=c||"";return f.at[a]=U(a,b,O(d)),f},f.write=function(a,b){var d="";switch(d="string"==typeof a||c(a)&&!a.type?w.dir:a.type()){case w.sel:m.push({type:w.sel,item:a}),a.styles.add(b);break;case w.at:m.push({type:w.at,item:a}),a.raw.canEmbedSels()&&a.sels.define(b);break;case w.dir:m.push({type:w.dir,item:a});break;default:throw j}return f},f.done=function(){u||(r=!0,s=!0)},f.load=function(){s&&(t||(t=!0,arguments.length>0&&(v=Array.prototype.slice.call(arguments,0)),r=!0,f.reload()))},f.end=function(){s||(r=!0,u=!0,f.reload())},f.parent=a,f.id=function(){return o},f.isChanged=function(){return r},f.name=function(){return e},f.reload=function(a){((r&&!s||r&&s&&t)&&!f.parent.state.isUpdatesSuspended||a)&&(D(),q&&f.parent.reload.dependents(e,a))},f.unload=function(){p&&(E(),q&&f.parent.unload.dependents(e))},f.remove=function(){f.unload(),f.parent.css.remove(f.name()),q&&f.parent.remove.dependents(e)}},f=function(){var d=this;d.info={name:function(){return a.NAME},title:function(){return a.TITLE},version:function(){return a.VERSION},copyright:function(){return a.COPYRIGHT},url:function(){return a.URL}},d.settings={},d.settings.isLogChanges=!1,d.settings.isLoadExtensions=!0,d.settings.isReloadOnChange=!0,d.settings.isConsiderScopes=!0,d.state={},d.state.isUpdatesSuspended=!1,d.state.isChangeHandlersAttached=!1;var f=[],g={};d.all=function(){return f},d.xref=function(a,b){var c=g[a]||[],d=0,e="";for(d=0;d<b.length;++d)e=b[d],e!==a&&-1===c.indexOf(e)&&c.push(e);g[a]=c},d.css=function(a){if(!a)throw"CSS filename must be defined.";if(d[a])throw'CSS file "'+a+'" is already loaded.';var b=new e(d,a);return d[a]=b,f.push(b),b},d.css.remove=function(a){if(!a)throw"CSS filename must be defined.";if(!d[a])throw'CSS file "'+a+'" is not loaded.';delete d[a];var b=0,c=null,e=-1;for(b=0;b<f.length;++b)if(c=f[b],c.name()===a){e=b;break}-1!==e&&f.splice(e,1)};var h={};d.ex=function(a,c,e){if(d.settings.isLoadExtensions){c.objectType||(c.objectType=["prefix","variable","rule","style","selector","at","direct"]),c.dataType||(c.dataType=""),c.type||(c.type=""),c.objectType=b(c.objectType)?c.objectType:[c.objectType];var f=0,g="",i="";for(f=0;f<c.objectType.length;++f){if(g=c.objectType[f],i="_"+g+"_"+c.dataType+"_"+c.type+"_"+a,h[i])throw'Extension "'+a+'" for given contents "'+i+'" is already loaded.';h[i]={exName:a,targetFilter:c,exProcessor:e}}}},d.ex.me=function(a,b,c,d,e){var f=null,g=null;b.parent=b.parent||a;for(g in h)h.hasOwnProperty(g)&&(f=h[g],-1===f.targetFilter.objectType.indexOf(c)||f.targetFilter.dataType!==d&&""!==f.targetFilter.dataType||f.targetFilter.type!==e&&""!==f.targetFilter.type||f.exProcessor(b))};var i=[];d.onChange=function(a,b){var e=0,f=-1;for(e=0;e<i.length;++e)if(i[e].name===a){f=e;break}c(b)?(d.state.isChangeHandlersAttached=!0,-1===f?i.push({name:a,handler:b}):i[f].handler=b):(-1!==f&&i.splice(f,1),0===i.length&&(d.state.isChangeHandlersAttached=!1))},d.onChange.raise=function(a){var b=0;for(b=0;b<i.length;++b)i[b].handler(a)},d.suspendUpdates=function(){d.state.isUpdatesSuspended=!0},d.isUpdatesSuspended=function(){return d.state.isUpdatesSuspended},d.resumeUpdates=function(){d.state.isUpdatesSuspended=!1,d.reload.all()},d.load={},d.load.all=function(){var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],b.load.apply(b,arguments)},d.unload={},d.unload.all=function(){var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],b.unload()},d.unload.dependents=function(a){var b=g[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.unload()},d.reload={},d.reload.all=function(a){var b=0,c=null;for(b=0;b<f.length;++b)c=f[b],c.reload(a)},d.reload.dependents=function(a,b){var c=g[a]||[],e=0,f="",h=null;for(e=0;e<c.length;++e)f=c[e],h=d[f],h&&h.reload(b)},d.remove={},d.remove.all=function(){d.unload.all();var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],delete d[b.name()];f=[]},d.remove.dependents=function(a){var b=g[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.remove()}};if(window.JS3=new f,window.JS3Settings&&d(window.JS3Settings)){var g="";for(g in window.JS3Settings)window.JS3Settings.hasOwnProperty(g)&&window.JS3.settings[g]&&(window.JS3.settings[g]=window.JS3Settings[g]);delete window.JS3Settings}}();