/*! JS3 - JavaScript Style Sheet  
 *  Version 0.8.5 (Build 18-03-2014) 
 *  Copyright (C) 2014 Vikas Burman. All rights reserved. 
 * 
 *  Project: https://github.com/vikasburman/js3 
 *  License: https://raw.github.com/vikasburman/js3/master/LICENSE.md 
 *  Commercial: http://www.vikasburman.com/js3 
 */ 
!function(){"use strict";var a={NAME:"JS3",TITLE:"JavaScript Style Sheets",VERSION:"0.8.5",COPYRIGHT:"Copyright (C) 2014 Vikas Burman. All rights reserved.",URL:"https://github.com/vikasburman/js3"},b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"function"==typeof a},d=function(a){return a&&"string"==typeof a},e=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)&&"Object"===a.constructor.name},f=function(a,b){return new[].constructor(b+1).join(a)},g={vars:"variable",style:"style",rule:"rule",sel:"selector",at:"at-rule",dir:"direct"},h=function(a,h){var i=this,j="invalid argument",k=" already defined",l="not supported",m="nested scopes cannot be applied",n=[],o=[],p=[],q=!1,r=!1,s=!0,t="",u="",v=0,w=!1,x=!1,y=!1,z=!1,A=!1,B=!1,C="~",D="$",E="@",F="&",G="%",H=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"_"+a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()},I=function(){return"js3_"+h+H()},J=function(){return a.settings.isGeneratePrettyCSS?"\n":""},K=function(){return a.settings.isGeneratePrettyCSS?f("	",v+1):""},L=function(b,c){return a.settings.isGeneratePrettyCSS?c?" "+b:b+" ":b},M=function(a,d){var f="",h=null,j="",k="",l="",m=0;if(d||(d=0),c(a)&&c(a.type)&&a.type()===g.style&&(a=[a]),b(a))for(m=0;m<a.length;++m)h=a[m],h.isOn()&&(k=h.apply(i),f+=(m>0?J():"")+k);else if(e(a)){for(j in a)a.hasOwnProperty(j)&&(k=a[j],k&&(0===d?f+=K()+j+L(":")+k.toString()+";"+J():1===d&&(v++,f+=K()+j+L("{",!0)+J(),v++,f+=M(k),v--,f+=J()+K()+L("}")+J(),v--)));l=J(),l.length>0&&f.substring(f.length-l.length)===l&&(f=f.substring(0,f.length-l.length))}return f},N=function(b,c,d){var e="",f="",h=0,i=0,j=null,k=null;if(d.type===g.dir)return void(b.itemCss=d.directValue+J());if(d.type===g.at&&0===d.children.length&&0===d.siblings.length&&!d.stylesLiteral&&0===d.styles.length)return void(b.itemCss=d.selector+(d.atRuleValue?" "+d.atRuleValue:"")+";"+J());if(d.canBeScoped&&a.settings.isConsiderScopes&&u?c+=" "+u+d.selector:0===d.siblings.length&&(c+=" "+d.selector),c=c.trim(),0!==d.siblings.length){if(k=d.siblings[d.siblings.length-1],k.stylesLiteral||0!==k.styles.length){for(e+=c+" "+d.selector+","+J(),h=0;h<d.siblings.length;++h)j=d.siblings[h],e+=c+" "+j.selector+","+J();f=J(),f.length>0&&e.substring(e.length-f.length)===f&&(e=e.substring(0,e.length-f.length)),e+=L("{",!0)+J(),k.stylesLiteral?e+=M(k.stylesLiteral):0!==k.styles.length&&(e+=M(k.styles)),e+=J()+"}"+J()}}else d.stylesLiteral||0!==d.styles.length?(e+=(d.isAtRule&&d.parent?K():"")+c+(d.atRuleValue?" "+d.atRuleValue:"")+L("{",!0)+J(),d.stylesLiteral?e+=M(d.stylesLiteral,d.isAtRule&&"@keyframes"===d.selector?1:0):0!==d.styles.length&&(e+=M(d.styles)),e+=J()+(d.isAtRule&&d.parent?K():"")+"}"+J()):d.isAtRule&&(e+=c+(d.atRuleValue?" "+d.atRuleValue:"")+L("{",!0)+J(),c="");if(e&&(b.itemCss+=e),0!==d.children.length)for(i=0;i<d.children.length;++i)N(b,c,d.children[i]);s&&d.isAtRule&&!d.stylesLiteral&&0===d.styles.length&&(b.itemCss+="}"+J())},O=function(){var a="",b={itemCss:""},c=0;for(c=0;c<n.length;++c)b.itemCss="",N(b,"",n[c]),a+=b.itemCss||"";return a},P=function(){var b=null,c=null,d=t;a.settings.isLoadOnDOM&&(t=I(),c=window.document.createElement("style"),c.id=t,c.innerHTML=O(),window.document.getElementsByTagName("head")[0].appendChild(c),d&&(b=window.document.getElementById(d),b.parentNode.removeChild(b))),w=!0,x=!1},Q=function(){if(w&&a.settings.isLoadOnDOM){var b=window.document.getElementById(t);b.parentNode.removeChild(b),t="",w=!1,x=!0}},R=function(){x=!0,w&&a.settings.isReloadOnChange&&(i.reload(),a._.state.isChangeHandlersAttached&&a._.raiseEvent({css:i,type:"valueChanged"}))},S=function(){x=!0,w&&a.settings.isReloadOnChange&&(i.reload(),a._.state.isChangeHandlersAttached&&a._.raiseEvent({css:i,type:"statusChanged"}))},T=function(a,b){var c="",d="",e=0;for(e=0;e<o.length;++e)d=o[e],c+=K()+a.replace(C,d)+L(":")+b+";"+J();return c},U=function(b,d){var e=null,f=!0,h=function(a){var b=a;return c(b)&&(b=b.apply(i)),b};h.plain=function(){return h(e)};var j=function(a){if(f&&(f=!1,e=d),a){var c=h(e);d=a,e=a,R(g.vars,b,c,h(e))}return h(e)};j();var k=H();return j.id=function(){return k},j.type=function(){return g.vars},j.fName=function(){return b},j.raw=function(){return h.plain()},j.raw.type=function(){var a=j.raw();return"object"==typeof a&&c(a.type)?a.type():typeof a},a._.exObj(i,j,g.vars,j.raw.type(),""),j},V=function(b,f,h,j,k){var m=null,n=!0,o=function(a){var b="";return a=a.toString(),a&&(f&&(b=T(h,a)),b+=K()+h.replace(C,"")+L(":")+a+";"+J()),b},p=function(a,b){var d=a;return c(a)&&(d=a.apply(i)),d&&k&&!b&&(d=c(k)?d.toString()+k.apply(i).toString():d.toString()+k.toString()),d};p.plain=function(){return p(m,!0)};var q=function(a,c){if(n)if(n=!1,e(j))m=j[Object.keys(j)[0]];else if(d(j)){if(j.substring(0,1)===G)throw l;m=j}else m=j;if(arguments.length>0){var f="",h=null,i=null;e(a)?(j=a,h=a[Object.keys(a)[0]]):d(a)?a.substring(0,1)===G?(f=a.substring(1),h=j[f]):(j=a,h=a):(j=a,h=a),i=o(m),c&&(k=c),m=h,R(g.rule,b,i,o(m))}return o(p(m))};q();var r=H(),s=!0;return q.id=function(){return r},q.type=function(){return g.rule},q.fName=function(){return b},q.off=function(){s&&(s=!1,S(g.rule,b,"on","off"))},q.on=function(){s||(s=!0,S(g.rule,b,"off","on"))},q.isOn=function(){return s},e(j)&&(q.select=function(a){c(a)&&(a=a.apply(i)),q(G+a)}),q.raw=function(){return p.plain()},q.raw.type=function(){var a=q.raw();return"object"==typeof a&&c(a.type)?a.type():typeof a},q.raw.property=function(){return h},q.raw.hasPrefixes=function(){return f},q.raw.suffix=function(){var a=p(),b=q.prop.value();return a.replace(b,"")},a._.exObj(i,q,g.rule,q.raw.type(),h),q},W=function(f,h){var j=null,k=!0,m=function(a){var b="",d="",f="",h=0,j=null,k=null;if(e(a))for(f in a)a.hasOwnProperty(f)&&(j=a[f],j&&(j=c(j)?j.apply(i).toString():j.toString(),-1!==f.indexOf(C)&&(k=T(f,j)),k=K()+f.replace(C,"")+L(":")+j+";"+J(),b+=k));else for(h=0;h<a.length;++h)k=a[h],k.isOn()&&(j=k.apply(i),k.type()===g.style&&(j+=J()),b+=j);return d=J(),d.length>0&&b.substring(b.length-d.length)===d&&(b=b.substring(0,b.length-d.length)),b},n=function(a){var c=null;return c=e(a)?a:b(a)?a:[a]};n.plain=function(){return n(j)};var o=function(a){var b="",c=null;if(k){if(k=!1,d(h)&&h.substring(0,1)===G)throw l;j=e(h)?h[Object.keys(h)[0]]:h}if(arguments.length>0){d(a)&&a.substring(0,1)===G?(b=a.substring(1),c=h[b]):e(a)?(h=a,c=a[Object.keys(a)[0]]):(h=a,c=a);var i=m(n(j));j=c,R(g.style,f,i,m(n(j)))}return m(n(j))};o();var p=H(),q=!0;return o.id=function(){return p},o.type=function(){return g.style},o.fName=function(){return f},o.off=function(){q&&(q=!1,S(g.style,f,"on","off"))},o.on=function(){q||(q=!0,S(g.style,f,"off","on"))},o.isOn=function(){return q},o.rules=function(){return n.plain()},o.rules.add=function(a,c){var d=n.plain();d=b(d)?d.slice(0):[d],a=b(a)?a:[a],d=c?a.concat(d):d.concat(a),o(d)},o.rules.remove=function(a){var c=n.plain(),d=0,e=-1,f=null,g=a.id(),h=!1;for(c=b(c)?c.slice(0):[c];;){for(e=-1,d=0;d<c.length;++d)if(f=c[d],f.id()===g){e=d;break}if(-1===e)break;c.splice(e,1),h=!0}h&&o(c)},o.rules.remove.all=function(){o([])},e(h)&&(o.select=function(a){c(a)&&(a=a.apply(i)),o(G+a)}),o.raw=function(){return n.plain()},o.raw.type=function(){return typeof o.raw()},a._.exObj(i,o,g.style,"",""),o};i._={},i._.prefixes=function(){if(z||y)throw l;var a=0,b="";for(a=0;a<arguments.length;++a){if(b=arguments[a],c(b)&&(b=b.apply(i).toString()),-1!==o.indexOf(b))throw b+k;o.push(b)}},i._.rule=function(a,b,c){if(z||y)throw l;if(a){var d="",e=!1,f=-1,g=null;if("["===a.substring(0,1)){if(f=a.indexOf("]"),d=a.substring(1,f),a=a.substring(f+1).trim(),i.rules[d])throw d+k}else d=H();return-1!==a.indexOf(C)&&(e=!0),g=V(d,e,a,b,c),i.rules[d]=g,g}},i._.style=function(){if(z||y)throw l;var a="",b=null,f=null,h=null,j=0,m=[];for(j=0;j<arguments.length;++j){if(h=arguments[j],0===j){if(d(h)){if(a=h,i.styles[a])throw a+k;continue}a=H()}if(e(h)){f=h;break}c(h)&&c(h.type)&&h.type()===g.rule?m.push(h):c(h)&&c(h.type)&&h.type()===g.style&&m.push(h)}return b=W(a,f||m),i.styles[a]=b,b},i._.vars=function(a,b){if(z||y)throw l;var c=null,d=null;if(2===arguments.length){if(i.vars[a])throw a+k;return c=U(a,b),i._.vars[a]=c,i.vars[a]=c,c}if(e(a)){for(d in a)if(a.hasOwnProperty(d)){if(i.vars[d])throw d+k;c=U(d,a[d]),i._.vars[d]=c,i.vars[d]=c}return null}},i._.$$=function(){if(z||y)throw l;var a=null,b=null,f=null,h=null,k=0;if(0===arguments.length?0!==p.length&&p.pop():s?p=[]:0!==p.length&&(f=p[p.length-1]),h={type:"",selector:"",directValue:"",atRuleValue:"",canBeScoped:!1,isAtRule:!1,parent:f,stylesLiteral:null,styles:[],siblings:[],children:[]},0!==arguments.length){for(k=0;k<arguments.length;++k)if(a=arguments[k],0!==k)if(h.isAtRule&&1===k&&d(a))h.atRuleValue=a;else if(e(a))h.stylesLiteral=a;else if(c(a)&&c(a.type)&&a.type()===g.style)h.styles.push(a);else{if(!c(a)||!c(a.type)||a.type()!==g.rule)throw j;h.styles.push(i._.style(a))}else{if(c(a)&&(a=a.apply(i).toString()),a.substring(0,1)===D){if(!s)throw m;a=a.substring(1),h.type=g.sel,h.canBeScoped=!0,h.selector=a;continue}if(a.substring(0,1)===E){h.type=g.at,h.isAtRule=!0,h.selector=a;continue}if(a.substring(0,1)===F){h.type=g.dir,h.directValue=a.substring(1);continue}h.type=g.sel,h.selector=a}if(h.parent)if(q)h.parent.children.push(h),p.push(h);else{if(!r)throw l;h.parent.siblings.push(h)}else n.push(h),p.push(h)}return b={},s||(b.up=function(){var a=s,b=i._.$$,c=null;return q=!1,s=!1,c=b.apply(i,[]),q=!1,s=a,c}),r&&!h.stylesLiteral&&0===h.styles.length&&delete b.up,r||(b.$$=function(){var a=s,b=i._.$$,c=null;return q=!0,s=!1,c=b.apply(i,arguments),q=!1,s=a,c}),s||h.isAtRule||h.stylesLiteral||0!==h.styles.length||(b.join=function(){var a=s,b=i._.$$,c=null;return r=!0,s=!1,c=b.apply(i,arguments),r=!1,s=a,c}),b},i._.end=function(a){if(z||y)throw l;0===arguments.length&&(a=!0),a?y||(x=!0,z=!0,i.reload()):z||(x=!0,y=!0)},i.vars={},i.styles={},i.rules={},i.parent=a,i.id=function(){return t},i.isChanged=function(){return x},i.name=function(){return h},i.toCSS=function(b){var c=a.settings.isGeneratePrettyCSS,d=0,e=0,f="";return arguments.length>0&&(a.settings.isGeneratePrettyCSS=b),d=window.performance.now(),f=O(),e=window.performance.now(),window.console.log("js3 > css: "+(e-d).toPrecision(6)+" ms"),a.settings.isGeneratePrettyCSS=c,f},i.load=function(a){y&&(!A||A&&!w)&&(A=!0,a&&(u=a),x=!0,i.reload())},i.reload=function(b,c){if((x&&!y||x&&y&&A)&&!a._.state.isUpdatesSuspended||b&&(A||z)){if(c&&B)return;P(),B=!1,a._.xref.hasDependents(h)&&a._.reloadDependents(h,b)}},i.unload=function(b){w&&(B||b||(B=!0),Q(),a._.xref.hasDependents(h)&&a._.unloadDependents(h))},i.remove=function(){i.unload(),a.remove(i.name()),a._.xref.hasDependents(h)&&a._.removeDependents(h)}},i=function(){var d=this,e=[],f=[],i={},j={},k={},l={},m=" is already loaded",n=" is a reserved name";d.info={name:function(){return a.NAME},title:function(){return a.TITLE},version:function(){return a.VERSION},copyright:function(){return a.COPYRIGHT},url:function(){return a.URL}},d.settings={},d.settings.isLoadExtensions=!0,d.settings.isLoadOnDOM=!0,d.settings.isReloadOnChange=!0,d.settings.isConsiderScopes=!0,d.settings.isGeneratePrettyCSS=!1,d._={},d._.state={},d._.state.isUpdatesSuspended=!1,d._.state.isChangeHandlersAttached=!1,d._.xref=function(a,b){var c="",d=0,e=null;for(d=0;d<b.length;++d)c=b[d],c!==a&&(e=i[c]||[],-1===e.indexOf(a)&&(e.push(a),i[c]=e))},d._.xref.hasDependents=function(a){return b(i[a])&&i[a].length>0},d._.raiseEvent=function(a){var b=0;for(b=0;b<f.length;++b)f[b].handler(a)},d._.reloadDependents=function(a,b){var c=i[a]||[],e=0,f="",g=null;for(e=0;e<c.length;++e)f=c[e],g=d[f],g&&g.reload(b,!0)},d._.removeDependents=function(a){var b=i[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.remove()},d._.unloadDependents=function(a){var b=i[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.unload(!0)},d._.exObj=function(a,b,c,d,e){var f=null,g=null,h=null,i=null,l="",m=[],n=[],o=function(){return b.apply(a,arguments),b};for(g in j)if(j.hasOwnProperty(g)&&(f=j[g],!(-1===f.targetFilter.objectType.indexOf(c)||f.targetFilter.dataType&&-1===f.targetFilter.dataType.indexOf(d)||f.targetFilter.type&&-1===f.targetFilter.type(e)))){m=["css","parent","name","object","raw","value","update"],n=[a,a.parent,a.name(),b,b.raw,b,o];for(l in k)k.hasOwnProperty(l)&&(i=k[l],m.push(i.name),n.push(i.defn));m.push(f.body),h=Function.apply(null,m),h.apply(a,n)}},d.define=function(a,c,f){var g=null,i=null,j=null,l=null,o=null,p="",q="",r="",s=0,t=["css","parent","name","prefixes","vars","style","styles","rule","rules","$$","end"],u=[],v=[],w=[];if(b(c)?(v=c,i=f):i=c,d[a])throw a+m;if(-1!==t.indexOf(a))throw a+n;if(g=new h(d,a),d[a]=g,e.push(g),p=i.toString(),p=p.substring(p.indexOf("{")+1,p.lastIndexOf("}")),u=[g,g.parent,a,g._.prefixes,g._.vars,g._.style,g.styles,g._.rule,g.rules,g._.$$,g._.end],v.length>0){for(s=0;s<v.length;++s)if(q=v[s],q!==a){if(l=d[q],!l)throw q+" is not loaded.";w.push(q),t.push(q),u.push(l)}w.length>0&&d._.xref(a,w)}for(r in k)k.hasOwnProperty(r)&&(o=k[r],t.push(o.name),u.push(o.defn));return t.push(p),j=Function.apply(null,t),j.apply(g,u),g},d.ex={},d.ex.op=function(a,e,f){if(d.settings.isLoadExtensions){c(e)?(f=e,e={}):b(e)&&(e={objectType:e}),e.objectType||(e.objectType=[g.vars,g.style,g.rule]),e.dataType&&(e.dataType=b(e.dataType)||[e.dataType]),e.type&&(e.type=b(e.type)||[e.type]),e.objectType=b(e.objectType)?e.objectType:[e.objectType];var h=0,i="",k="",l="";for(h=0;h<e.objectType.length;++h){if(i=e.objectType[h],k="_"+i+"_"+a,j[k])throw k+m;l=f.toString(),l=l.substring(l.indexOf("{")+1,l.lastIndexOf("}")),j[k]={exName:a,targetFilter:e,body:l}}}},d.ex.fn=function(a,b){if(d.settings.isLoadExtensions){if(-1!==["css","parent","name","object","raw","value","update"].indexOf(a))throw a+n;if(k["_"+a])throw a+m;k["_"+a]={name:a,defn:b}}},d.ex.ty=function(a,b){if(d.settings.isLoadExtensions){if(l[a])throw a+m;l[a]=b}},d.types=function(a){return l[a]?l[a]:null},d.onChange=function(a,b){var e=0,g=-1;for(e=0;e<f.length;++e)if(f[e].name===a){g=e;break}c(b)?(d._.state.isChangeHandlersAttached=!0,-1===g?f.push({name:a,handler:b}):f[g].handler=b):(-1!==g&&f.splice(g,1),0===f.length&&(d._.state.isChangeHandlersAttached=!1))},d.all=function(){return e},d.suspendUpdates=function(){d._.state.isUpdatesSuspended=!0},d.isUpdatesSuspended=function(){return d._.state.isUpdatesSuspended},d.resumeUpdates=function(){d._.state.isUpdatesSuspended=!1,d.reload.all()},d.load={},d.load.all=function(){var a=0,b=null;for(a=0;a<e.length;++a)b=e[a],b.load.apply(b,arguments)},d.unload={},d.unload.all=function(){var a=0,b=null;for(a=0;a<e.length;++a)b=e[a],b.unload()},d.reload={},d.reload.all=function(a){var b=0,c=null;for(b=0;b<e.length;++b)c=e[b],c.reload(a)},d.remove=function(a){var b=0,c=-1,f=null;if(d[a]){for(delete d[a],b=0;b<e.length;++b)if(f=e[b],f.name()===a){c=b;break}-1!==c&&e.splice(c,1)}},d.remove.all=function(){var a=0,b=null;for(d.unload.all(),a=0;a<e.length;++a)b=e[a],delete d[b.name()];e=[]}};if(window.JS3=new i,window.JS3Settings&&e(window.JS3Settings)){var j="";for(j in window.JS3Settings)window.JS3Settings.hasOwnProperty(j)&&window.JS3.settings[j]&&(window.JS3.settings[j]=window.JS3Settings[j]);delete window.JS3Settings}}();