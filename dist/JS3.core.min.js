/*! JS3 - JavaScript Style Sheet  
 *  Version 0.5.7 (Build 07-03-2014) 
 *  Copyright (C) 2014 Vikas Burman. All rights reserved. 
 * 
 *  Project: https://github.com/vikasburman/js3 
 *  License: https://raw.github.com/vikasburman/js3/master/LICENSE.md 
 *  Commercial: http://www.vikasburman.com/js3 
 */ 
!function(){"use strict";var a={NAME:"JS3",TITLE:"JavaScript Style Sheets",VERSION:"0.5.7",COPYRIGHT:"Copyright (C) 2014 Vikas Burman. All rights reserved.",URL:"https://github.com/vikasburman/js3"},b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"function"==typeof a},d=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},e=function(a,e){var f=this,g="$STYLES$",h="$SELS$",i="$VALUE$",j="invalid argument",k=" already defined",l=" cannot be applied",m="not supported",n=[],o=null,p="",q=!1,r=!1,s=!1,t=!1,u=!1,v=!1,w=[],x={pfx:"prefix",vars:"variable",rule:"rule",style:"style",sel:"selector",at:"at",dir:"direct"},y={cs:"charset",doc:"document",ff:"font-face",imp:"import",med:"media",ns:"namespace",pg:"page",kf:"keyframes",sup:"supports"},z={charset:'@charset "'+i+'";',"font-face":"@font-face {"+h+"}","import":"@import "+i+";",namespace:"@namespace "+i+";",page:"@page "+i+" {"+h+"}",media:"@media "+i+" {"+h+"}",document:"@document "+i+" {"+h+"}",keyframes:"@keyframes "+i+" {"+h+"}",supports:"@supports "+i+" {"+h+"}"},A=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"_"+a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()},B=function(){return"js3_"+e+A()},C=function(){return f.parent.settings.isGeneratePrettyCSS?"\n":""},D=function(){return f.parent.settings.isGeneratePrettyCSS?"	":""},E=function(a){var b="",c=null,d="",e=f.parent.settings.isDebugging,g=0;for(g=0;g<a.length;++g)c=a[g],c.isOn()?(d=c.apply(f),b+=" "+d,e&&window.console.log("style: "+c.fName()+" >> "+d)):e&&window.console.log("style: "+c.fName()+" >> (skipped)");return b},F=function(){var a="",b=null,c=null,d=null,e="",i=f.parent.settings.isDebugging,j=null,k="",m="",o=0,p="",q="",r="",s=0,t=0,u="";for(o=0;o<n.length;++o){switch(b=n[o],e="",b.type){case x.sel:if(d=b.item,d.isOn())if(q=d.apply(f),k=q.replace(g,E(d.styles()))){if(d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&w.length>0)for(s=0;s<w.length;++s)u=w[s],k+=u+" "+k;e=k,i&&window.console.log("selector: "+d.fName()+" >> "+e)}else i&&window.console.log("selector: "+d.fName()+" >> (no styles)");else i&&window.console.log("selector: "+d.fName()+" >> (skipped)");break;case x.at:if(c=b.item,c.isOn())if(r=c.apply(f),c.raw.canEmbedSels()){for(k="",p="",j=c.sel.apply(f),s=0;s<j.length;++s)if(p=j[s],c.raw.hasSpecialSelectors())d=null,q=p+" {"+C()+g+"}"+C(),m=E(c.styles(p)),m&&(k+=q.replace(g,m));else if(d=f.sel[p],d.isOn()&&(q=d(),m=E(c.styles(p)),m&&(k+=q.replace(g,m),d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&w.length>0)))for(t=0;t<w.length;++t)u=w[t],k+=u+" "+k;k?(e=r.replace(h,C()+k),i&&window.console.log("at rule: "+c.fName()+" >> "+e)):i&&window.console.log("at rule: "+c.fName()+" >> (no styles)")}else e=r,i&&window.console.log("at rule: "+c.fName()+" >> "+r);else i&&window.console.log("at rule: "+c.fName()+" >> (skipped)");break;case x.dir:e=("string"==typeof b.item?b.item:b.item.apply(f))+C();break;default:throw b.item.fName()+l}a+=e||""}return a},G=function(){var a=p;p=B();var b=window.document.createElement("style");if(b.id=p,b.innerHTML=F(),window.document.getElementsByTagName("head")[0].appendChild(b),a){var c=window.document.getElementById(a);c.parentNode.removeChild(c)}q=!0,s=!1},H=function(){if(q){var a=window.document.getElementById(p);a.parentNode.removeChild(a),p="",q=!1,s=!0}},I=function(a,b,c){s=!0,q&&f.parent.settings.isLogChanges&&window.console.log(a.toString()+" new style"+(a>1?"s are":" is")+" added to "+b+' "'+c+'".'),q&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"stylesAdded"}))},J=function(a,b,c){s=!0,q&&f.parent.settings.isLogChanges&&window.console.log('Style "'+a+'" is removed from '+b+' "'+c+'".'),q&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"styleRemoved"}))},K=function(a,b,c,d){s=!0,q&&f.parent.settings.isLogChanges&&window.console.log("Value of "+a+' "'+b+'" is changed from "'+c+'" to "'+d+'".'),q&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"valueChanged"}))},L=function(a,b,c,d){s=!0,q&&f.parent.settings.isLogChanges&&window.console.log("Inclusion status of "+a+' "'+b+'" is changed from "'+c+'" to "'+d+'".'),q&&f.parent.settings.isReloadOnChange&&(f.reload(),f.parent.state.isChangeHandlersAttached&&f.parent.onChange.raise({css:f,type:"statusChanged"}))},M=function(a){var b=function(){return null};return a&&(b=c(a)?function(){var b=a.apply(f);return b}:function(){var b=a;return b}),b.plain=function(){return b(!0)},b},N=function(a){var b=function(){return null};return a&&(b=c(a)?function(){var b=a.apply(f);return b}:function(){var b=a;return b}),b.plain=function(){return b(!0)},b},O=function(a,e,g){var h=function(){return""};return a&&(h=c(a)?e?b(e)?function(b){var d="",h=a.apply(f);return h<=e.length&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:d(e)?function(b){var d="",h=a.apply(f);return e[h]&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:function(b){var d=a.apply(f);return d&&(d=c(e)&&!b?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}:function(){var b=a.apply(f);return b}:function(b){var d=a;return d&&e&&!b&&(d=c(e)?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}),h.plain=function(){return h(!0)},h.last={},h.last.valueOrValueFuncOrCondFunc=a,h.last.valueSuffixOrValueArrayOrValueLiteral=e,h.last.valueSuffixOrFuncOrNone=g,h},P=function(a,e){var g=function(){return[]},h=function(a){return a||(a=[]),b(a)||(a=[a]),a};if(a)if(c(a))if(e)if(b(e))g=function(){var b=[],c=a.apply(f);return c<=e.length&&(b=h(e[c])),b};else{if(!d(e))throw j;g=function(){var b=[],c=a.apply(f);return e[c]&&(b=h(e[c])),b}}else g=c(a.type)&&a.type()===x.rule?function(){var b=h(a);return b}:function(){var b=h(a.apply(f));return b};else{if(!b(a))throw j;g=function(){var b=a;return b}}return g.plain=function(){return g()},g.last={},g.last.ruleArrayOrRuleArrayFuncOrCondFunc=a,g.last.ruleArrayOrRuleLiteral=e,g},Q=function(a){var d=function(){return""},e=function(a){return a+" {"+C()+g+"}"+C()};return a&&(d=c(a)?function(b){var c=a.apply(f);return c&&!b&&(c=e(c)),c}:b(a)?function(b){var c=0,d="";for(c=0;c<a.length;++c)d?d+=", "+a[c]:d=a[c];return d&&!b&&(d=e(d)),d}:function(b){var c=a;return c&&!b&&(c=e(c)),c}),d.plain=function(){return d(!0)},d},R=function(a){var b=function(){return""};return arguments.length>0&&(b=c(a)?function(){var b=a.apply(f).toString();return b}:function(){var b=a.toString();return b}),b.plain=function(){return b(!0)},b},S=function(a,b){var c=function(c){if(c){var d=b();b=N(c),K(x.pfx,a,d,b())}return b()},d=A(),e=!0;return c.id=function(){return d},c.type=function(){return x.pfx},c.fName=function(){return a},c.off=function(){e&&(e=!1,o=null,L(x.pfx,a,"on","off"))},c.on=function(){e||(e=!0,o=null,L(x.pfx,a,"off","on"))},c.isOn=function(){return e},c.raw={},c.raw.value=function(){return b.plain()},c.raw.type=function(){return typeof c.raw.value()},f.parent.ex.me(f,c,x.pfx,c.raw.type(),""),c},T=function(a,b){var c=function(c){if(c){var d=b();b=M(c),K(x.vars,a,d,b())}return b()},d=A();return c.id=function(){return d},c.type=function(){return x.vars},c.fName=function(){return a},c.raw={},c.raw.value=function(){return b.plain()},c.raw.type=function(){return typeof c.raw.value()},f.parent.ex.me(f,c,x.vars,c.raw.type(),""),c},U=function(a,b,d,e){var g=function(a){if(a&&(a=a.toString()),!a)return"";a.substr(a.length-1!==";")&&(a+=";");var e=D()+d+":"+a;if(b){if(!o){var g=null,h="";o=[];for(h in f.pfx)f.pfx.hasOwnProperty(h)&&(g=f.pfx[h],c(g.type)&&g.isOn()&&o.push(g.apply(f)))}var i=0;for(i=0;i<o.length;++i)e=D()+o[i]+d+":"+a+C()+e}return e},h=function(b,c,d){if(arguments.length>0){var f=g(e());c||(c=e.last.valueSuffixOrValueArrayOrValueLiteral),d||(d=e.last.valueSuffixOrFuncOrNone),e=O(b,c,d),K(x.rule,a,f,g(e()))}return g(e())},i=A(),j=!0,k=null;return h.id=function(){return i},h.type=function(){return x.rule},h.fName=function(){return a},h.off=function(){j&&(j=!1,L(x.rule,a,"on","off"))},h.on=function(){j||(j=!0,L(x.rule,a,"off","on"))},h.isOn=function(){return j},h.reset=function(a){if(!e.last.valueSuffixOrValueArrayOrValueLiteral)throw m;a?(k||(k=e.last),h(function(){return a})):(k&&(e.last=k,k=null),h(e.last.valueOrValueFuncOrCondFunc))},h.raw={},h.raw.property=function(){return d},h.raw.hasPrefixes=function(){return b},h.raw.value=function(){return e.plain()},h.raw.type=function(){return typeof h.raw.value()},h.raw.suffix=function(){var a=e(),b=h.prop.value();return a.replace(b,"")},f.parent.ex.me(f,h,x.rule,h.raw.type(),d),h},V=function(a,c){var d=function(a){var b="",c=0,d="",e=f.parent.settings.isDebugging,g=null;for(c=0;c<a.length;++c)g=a[c],g.isOn()?(d=g.apply(f),b+=d+C(),e&&window.console.log("style rule: "+g.fName()+" >> "+d)):e&&window.console.log("style rule: "+g.fName()+" >> (skipped)");return b},e=function(b,e){if(arguments.length>0){var f=d(c());e||(e=c.last.ruleArrayOrRuleLiteral),c=P(b,e),K(x.style,a,f,d(c()))}return d(c())},g=A(),h=!0,i=null;return e.id=function(){return g},e.type=function(){return x.style},e.fName=function(){return a},e.off=function(){h&&(h=!1,L(x.style,a,"on","off"))},e.on=function(){h||(h=!0,L(x.style,a,"off","on"))},e.isOn=function(){return h},e.rules=function(){return c.plain()},e.rules.add=function(a,d){var f=c.plain();f=b(f)?f.slice(0):[f],a=b(a)?a:[a],f=d?a.concat(f):f.concat(a),e(f)},e.rules.remove=function(a){var d=c.plain();d=b(d)?d.slice(0):[d];for(var f=0,g=null,h=a.id(),i=-1,j=!1;;){for(i=-1,f=0;f<d.length;++f)if(g=d[f],g.id()===h){i=f;break}if(-1===i)break;d.splice(i,1),j=!0}j&&e(d)},e.rules.remove.all=function(){e([])},e.reset=function(a){if(!c.last.ruleArrayOrRuleLiteral)throw m;a?(i||(i=c.last),e(function(){return a})):(i&&(c.last=i,i=null),e(c.last.ruleArrayOrRuleArrayFuncOrCondFunc))},e.raw={},e.raw.value=function(){return c.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,x.style,"",""),e},W=function(a,c,d){c=c||!1;var e=function(b){if(b){var c=d();d=Q(b),K(x.sel,a,c,d())}return d()},g=A(),h=[],i=!0;return e.id=function(){return g},e.type=function(){return x.sel},e.fName=function(){return a},e.off=function(){i&&(i=!1,L(x.sel,a,"on","off"))},e.on=function(){i||(i=!0,L(x.sel,a,"off","on"))},e.isOn=function(){return i},e.styles=function(){return h},e.styles.value=function(){return E(e.styles())},e.styles.add=function(c){c=b(c)?c:[c],h=h.concat(c),I(c.length,x.sel,a)},e.styles.remove=function(b){for(var c=0,d=b.id(),e=b.fName(),f=-1,g=!1;;){for(f=-1,c=0;c<h.length;++c)if(h[c].id()===d){f=c;break}if(-1===f)break;h.splice(f,1),g=!0}g&&J(e,x.sel,a)},e.styles.remove.all=function(){h.length=0,J("All styles",x.sel,a)},e.raw={},e.raw.canBeScoped=function(){return c},e.raw.value=function(){return d.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,x.sel,"",""),e},X=function(a,c,d){var e=z[c.toLowerCase()];if(!e)throw j;var g=-1!==e.indexOf(h),k=function(a){return a=a||"",e.replace(i,a)+C()},l=function(b){if(b){var c=k(d());d=R(b),K(x.at,a,c,k(d()))}return k(d())},m=A(),n={},o=!0;return l.id=function(){return m},l.type=function(){return x.at},l.fName=function(){return a},l.off=function(){o&&(o=!1,L(x.at,a,"on","off"))},l.on=function(){o||(o=!0,L(x.at,a,"off","on"))},l.isOn=function(){return o},g&&(l.sel=function(){var a=[],b="";for(b in n)n.hasOwnProperty(b)&&a.push(b);return a},l.sel.define=function(b){n=b,I("New selectors and styles",x.at,a)},l.sel.add=function(c,d){var e="string"==typeof c?c:c.fName();d=d?b(d)?d:[d]:[],n[e]=n[e]?n[e].concat(d):d,I(d.length,x.sel,e+" (under "+a+")")},l.sel.remove=function(c,d){var e="string"==typeof c?c:c.fName();if(n[e]){var f=0,g=b(n[e])?n[e]:[];if(g.length>0){for(var h=d.fName(),i=-1,j=!1;;){for(i=-1,f=0;f<g.length;++f)if(g[f].fName()===h){i=f;break}if(-1===i)break;g.splice(i,1),j=!0}j&&(n[e]=g,J(h,x.sel,e+" (under "+a+")"))}}},l.sel.remove.all=function(){n={},J("All styles",x.at,a)},l.styles=function(a){var c="string"==typeof a?a:a.fName(),d=[];return n[c]&&(d=n[c]),b(d)?d:[d]},l.styles.value=function(a){var b="string"==typeof a?a:a.fName();return E(l.styles(b))},l.styles.add=function(a,b){return l.sel.add(a,b)},l.styles.remove=function(a,b){return l.sel.remove(a,b)},l.styles.remove.all=function(b){var c="string"==typeof b?b:b.id();c?n[c]&&(n[c]=[],J("All styles",x.sel,c+" (under "+a+")")):l.sel.remove.all()}),l.raw={},l.raw.rule=function(){return c},l.raw.canEmbedSels=function(){return g},l.raw.hasSpecialSelectors=function(){return c===y.kf},l.raw.value=function(){return d.plain()},l.raw.type=function(){return typeof l.raw.value()},f.parent.ex.me(f,l,x.at,"",c),l};f.xref=function(){return arguments.length>0&&(f.parent.xref(e,Array.prototype.slice.call(arguments,0)),r=!0),f},f.rule=function(a,b,c,d,e){var f=!1;return"string"==typeof a?(d&&(e=d),c&&(d=c),b&&(c=b),b=a,f=!1):f=a,U(A(),f,b,O(c,d,e))},f.style=function(a,b){return V(A(),P(a,b))},f.pfx=function(a,b){if(2===arguments.length){if(f.pfx[a])throw a+k;f.pfx[a]=S(a,N(b))}else if(d(a)){var c=null;for(c in a)if(a.hasOwnProperty(c)){if(f.pfx[c])throw c+k;f.pfx[c]=S(c,N(a[c]))}}return f},f.vars=function(a,b){if(2===arguments.length){if(f.vars[a])throw a+k;f.vars[a]=T(a,M(b))}else if(d(a)){var c=null;for(c in a)if(a.hasOwnProperty(c)){if(f.vars[c])throw c+k;f.vars[c]=T(c,M(a[c]))}}return f},f.sel=function(a,b,c){if(f.sel[a])throw a+k;return f.sel[a]=W(a,c,Q(b)),f},f.rules=function(a,b,c,d,e,g){if(f.rules[a])throw a+k;var h=!1;return"string"==typeof b?(e&&(g=e),d&&(e=d),c&&(d=c),c=b,h=!1):h=b,f.rules[a]=U(a,h,c,O(d,e,g)),f},f.styles=function(a,b,c){if(f.styles[a])throw a+k;return f.styles[a]=V(a,P(b,c)),f},f.at=function(a,b,c){if(f.at[a])throw a+k;return c=c||"",f.at[a]=X(a,b,R(c)),f},f.write=function(a,b){var d="";switch(d="string"==typeof a||c(a)&&!a.type?x.dir:a.type()){case x.sel:n.push({type:x.sel,item:a}),b&&a.styles.add(b);break;case x.at:n.push({type:x.at,item:a}),a.raw.canEmbedSels()&&b&&a.sel.define(b);break;case x.dir:n.push({type:x.dir,item:a});break;default:throw j}return f},f.done=function(){v||(s=!0,t=!0,f.parent.settings.isDebugging&&window.console.log("complete: Marked as done. Not loaded yet."))},f.load=function(){t&&(u||(u=!0,arguments.length>0&&(w=Array.prototype.slice.call(arguments,0)),s=!0,f.reload(),f.parent.settings.isDebugging&&window.console.log("complete: Loaded.")))},f.end=function(){t||(s=!0,v=!0,f.reload(),f.parent.settings.isDebugging&&window.console.log("complete: Loaded."))},f.parent=a,f.id=function(){return p},f.isChanged=function(){return s},f.name=function(){return e},f.reload=function(a){((s&&!t||s&&t&&u)&&!f.parent.state.isUpdatesSuspended||a&&(u||v))&&(G(),r&&f.parent.reload.dependents(e,a))},f.unload=function(){q&&(H(),r&&f.parent.unload.dependents(e))},f.remove=function(){f.unload(),f.parent.css.remove(f.name()),r&&f.parent.remove.dependents(e)}},f=function(){var d=this;d.info={name:function(){return a.NAME},title:function(){return a.TITLE},version:function(){return a.VERSION},copyright:function(){return a.COPYRIGHT},url:function(){return a.URL}},d.settings={},d.settings.isLogChanges=!1,d.settings.isLoadExtensions=!0,d.settings.isReloadOnChange=!0,d.settings.isConsiderScopes=!0,d.settings.isGeneratePrettyCSS=!1,d.settings.isDebugging=!1,d.state={},d.state.isUpdatesSuspended=!1,d.state.isChangeHandlersAttached=!1;var f=[],g={};d.all=function(){return f},d.xref=function(a,b){var c=g[a]||[],d=0,e="";for(d=0;d<b.length;++d)e=b[d],e!==a&&-1===c.indexOf(e)&&c.push(e);g[a]=c},d.css=function(a){if(d[a])throw a+" is already loaded.";var b=new e(d,a);return d[a]=b,f.push(b),b},d.css.remove=function(a){if(d[a]){delete d[a];var b=0,c=null,e=-1;for(b=0;b<f.length;++b)if(c=f[b],c.name()===a){e=b;break}-1!==e&&f.splice(e,1)}};var h={};d.ex=function(a,c,e){if(d.settings.isLoadExtensions){c.objectType||(c.objectType=["prefix","variable","rule","style","selector","at","direct"]),c.dataType||(c.dataType=""),c.type||(c.type=""),c.objectType=b(c.objectType)?c.objectType:[c.objectType];var f=0,g="",i="";for(f=0;f<c.objectType.length;++f){if(g=c.objectType[f],i="_"+g+"_"+c.dataType+"_"+c.type+"_"+a,h[i])throw'Extension "'+a+'" for given contents "'+i+'" is already loaded.';h[i]={exName:a,targetFilter:c,exProcessor:e}}}},d.ex.me=function(a,b,c,d,e){var f=null,g=null;b.parent=b.parent||a;for(g in h)h.hasOwnProperty(g)&&(f=h[g],-1===f.targetFilter.objectType.indexOf(c)||f.targetFilter.dataType!==d&&""!==f.targetFilter.dataType||f.targetFilter.type!==e&&""!==f.targetFilter.type||f.exProcessor(b))};var i=[];d.onChange=function(a,b){var e=0,f=-1;for(e=0;e<i.length;++e)if(i[e].name===a){f=e;break}c(b)?(d.state.isChangeHandlersAttached=!0,-1===f?i.push({name:a,handler:b}):i[f].handler=b):(-1!==f&&i.splice(f,1),0===i.length&&(d.state.isChangeHandlersAttached=!1))},d.onChange.raise=function(a){var b=0;for(b=0;b<i.length;++b)i[b].handler(a)},d.suspendUpdates=function(){d.state.isUpdatesSuspended=!0},d.isUpdatesSuspended=function(){return d.state.isUpdatesSuspended},d.resumeUpdates=function(){d.state.isUpdatesSuspended=!1,d.reload.all()},d.load={},d.load.all=function(){var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],b.load.apply(b,arguments)},d.unload={},d.unload.all=function(){var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],b.unload()},d.unload.dependents=function(a){var b=g[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.unload()},d.reload={},d.reload.all=function(a){var b=0,c=null;for(b=0;b<f.length;++b)c=f[b],c.reload(a)},d.reload.dependents=function(a,b){var c=g[a]||[],e=0,f="",h=null;for(e=0;e<c.length;++e)f=c[e],h=d[f],h&&h.reload(b)},d.remove={},d.remove.all=function(){d.unload.all();var a=0,b=null;for(a=0;a<f.length;++a)b=f[a],delete d[b.name()];f=[]},d.remove.dependents=function(a){var b=g[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.remove()}};if(window.JS3=new f,window.JS3Settings&&d(window.JS3Settings)){var g="";for(g in window.JS3Settings)window.JS3Settings.hasOwnProperty(g)&&window.JS3.settings[g]&&(window.JS3.settings[g]=window.JS3Settings[g]);delete window.JS3Settings}}();