/*! JS3 - JavaScript Style Sheet  
 *  Version 0.1.3 (Build 22-02-2014) 
 *  Copyright © 2014 Vikas Burman. All rights reserved. 
 * 
 *  Project: https://github.com/vikasburman/js3 
 *  License: https://raw.github.com/vikasburman/js3/master/LICENSE.md 
 *  Commercial: http://www.vikasburman.com/js3 
 */ 
!function(){"use strict";var a={NAME:"JS3",TITLE:"JavaScript Style Sheets",VERSION:"0.1.3",COPYRIGHT:"Copyright © 2014 Vikas Burman. All rights reserved.",URL:"https://github.com/vikasburman/js3"},b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"function"==typeof a},d=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},e=function(a,e){var f=this,g="$STYLES$",h="$SELS$",i="$VALUE$",j="invalid argument",k=" already defined",l=" cannot be applied",m=[],n="",o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=[],v={vars:"variable",rule:"rule",style:"style",sel:"selector",at:"at",decl:"decl"},w={cs:"charset",doc:"document",ff:"font-face",imp:"import",med:"media",ns:"namespace",pg:"page",kf:"keyframes",sup:"supports"},x=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"_"+a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()},y=function(){return"js3_"+e+x()},z=function(a){var b="",c=null,d=0;for(d=0;d<a.length;++d)c=a[d],b+=" "+c.apply(f);return b},A=function(){var a="",b=null,c=null,d=null,e="",i=null,j="",k=0,n="",o="",p="",q=0,r=0,s="";for(k=0;k<m.length;++k){switch(b=m[k],e="",b.type){case v.sel:if(d=b.item,o=d.apply(f),j=o.replace(g,z(d.styles())),d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&u.length>0)for(q=0;q<u.length;++q)s=u[q],j+=s+" "+j;e=j;break;case v.at:if(c=b.item,p=c.apply(f),c.raw.canEmbedSels()){for(j="",n="",i=c.sels.apply(f),q=0;q<i.length;++q)if(n=i[q],c.raw.hasSpecialSelectors())d=null,o=n+" {"+g+"}",j+=o.replace(g,z(c.styles(n)));else if(d=f.sel[n],o=d(),j+=o.replace(g,z(c.styles(n))),d.raw.canBeScoped()&&f.parent.settings.isConsiderScopes&&u.length>0)for(r=0;r<u.length;++r)s=u[r],j+=s+" "+j;e=p.replace(h,j)}else e=p;break;case v.decl:e="string"==typeof b.item?b.item:b.item.apply(f);break;default:throw b.item.fName()+l}a+=" "+e}return a},B=function(){var a=n;n=y();var b=window.document.createElement("style");if(b.id=n,b.innerHTML=A(),window.document.getElementsByTagName("head")[0].appendChild(b),a){var c=window.document.getElementById(a);c.parentNode.removeChild(c)}o=!0,q=!1},C=function(){if(o){var a=window.document.getElementById(n);a.parentNode.removeChild(a),n="",o=!1,q=!0}},D={charset:'@charset "'+i+'";',"font-face":"@font-face {"+h+"}","import":"@import "+i+";",namespace:"@namespace "+i+";",page:"@page "+i+" {"+h+"}",media:"@media "+i+" {"+h+"}",document:"@document "+i+" {"+h+"}",keyframes:"@keyframes "+i+" {"+h+"}",supports:"@supports "+i+" {"+h+"}"},E=function(a,b,c){q=!0,o&&f.parent.settings.isLogChanges&&window.console.log(a.toString()+" new style"+(a>1?"s are":" is")+" added to "+b+' "'+c+'".'),o&&f.parent.settings.isReloadOnChange&&f.reload()},F=function(a,b,c){q=!0,o&&f.parent.settings.isLogChanges&&window.console.log('Style "'+a+'" is removed from '+b+' "'+c+'".'),o&&f.parent.settings.isReloadOnChange&&f.reload()},G=function(a,b,c,d){q=!0,o&&f.parent.settings.isLogChanges&&window.console.log("Value of "+a+' "'+b+'" is changed from "'+c+'" to "'+d+'".'),o&&f.parent.settings.isReloadOnChange&&f.reload()},H=function(a){var b=function(){return null};return a&&(b=c(a)?function(){var b=a.apply(f);return b}:function(){var b=a;return b}),b.plain=function(){return b(!0)},b},I=function(a,e,g){var h=function(){return""};return a&&(h=c(a)?e?b(e)?function(b){var d="",h=a.apply(f);return h<=e.length&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:d(e)?function(b){var d="",h=a.apply(f);return e[h]&&(d=e[h]),d&&g&&!b&&(d=c(g)?d.toString()+g.apply(f).toString():d.toString()+g.toString()),d}:function(b){var d=a.apply(f);return d&&(d=c(e)&&!b?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}:function(){var b=a.apply(f);return b}:function(b){var d=a;return d&&e&&!b&&(d=c(e)?d.toString()+e.apply(f).toString():d.toString()+e.toString()),d}),h.plain=function(){return h(!0)},h.last={},h.last.valueOrValueFuncOrCondFunc=a,h.last.valueSuffixOrValueArrayOrValueLiteral=e,h.last.valueSuffixOrFuncOrNone=g,h},J=function(a,e){var g=function(){return[]},h=function(a){return a||(a=[]),b(a)||(a=[a]),a};if(a)if(c(a))if(e)if(b(e))g=function(){var b=[],c=a.apply(f);return c<=e.length&&(b=h(e[c])),b};else{if(!d(e))throw j;g=function(){var b=[],c=a.apply(f);return e[c]&&(b=h(e[c])),b}}else g=c(a.type)&&a.type()===v.rule?function(){var b=h(a);return b}:function(){var b=h(a.apply(f));return b};else{if(!b(a))throw j;g=function(){var b=a;return b}}return g.plain=function(){return g()},g.last={},g.last.ruleArrayOrRuleArrayFuncOrCondFunc=a,g.last.ruleArrayOrRuleLiteral=e,g},K=function(a){var b=function(){return""},d=function(a){return a+" {"+g+"}"};return a&&(b=c(a)?function(b){var c=a.apply(f);return c&&!b&&(c=d(c)),c}:function(b){var c=a;return c&&!b&&(c=d(c)),c}),b.plain=function(){return b(!0)},b},L=function(a){var b=function(){return""};return arguments.length>0&&(b=c(a)?function(){var b=a.apply(f).toString();return b}:function(){var b=a.toString();return b}),b.plain=function(){return b(!0)},b},M=function(a,b){var c=function(c){if(c){var d=b();b=H(c),G(v.vars,a,d,b())}return b()},d=x();return c.id=function(){return d},c.type=function(){return v.vars},c.fName=function(){return a},c.raw={},c.raw.value=function(){return b.plain()},c.raw.type=function(){return typeof c.raw.value()},f.parent.ex.me(f,c,v.vars,c.raw.type(),""),c},N=function(a,b,c){var d=function(a){return a&&(a=a.toString()),a.substr(a.length-1!==";")&&(a+=";"),b+":"+a},e=function(b,e,f){if(arguments.length>0){var g=d(c());e||(e=c.last.valueSuffixOrValueArrayOrValueLiteral),f||(f=c.last.valueSuffixOrFuncOrNone),c=I(b,e,f),G(v.rule,a,g,d(c()))}return d(c())},g=x();return e.id=function(){return g},e.type=function(){return v.rule},e.fName=function(){return a},e.raw={},e.raw.property=function(){return b},e.raw.value=function(){return c.plain()},e.raw.type=function(){return typeof e.raw.value()},e.raw.suffix=function(){var a=c(),b=e.prop.value();return a.replace(b,"")},f.parent.ex.me(f,e,v.rule,e.raw.type(),b),e},O=function(a,c){var d=function(a){var b="",c=0,d=null;for(c=0;c<a.length;++c)d=a[c],b+=d.apply(f);return b},e=function(b,e){if(arguments.length>0){var f=d(c());e||(e=c.last.ruleArrayOrRuleLiteral),c=J(b,e),G(v.style,a,f,d(c()))}return d(c())},g=x();return e.id=function(){return g},e.type=function(){return v.style},e.fName=function(){return a},e.rules=function(){return c.plain()},e.rules.add=function(a,d){var f=c.plain();f=b(f)?f.slice(0):[f],a=b(a)?a:[a],f=d?a.concat(f):f.concat(a),e(f)},e.rules.remove=function(a){var d=c.plain();d=b(d)?d.slice(0):[d];for(var f=0,g=null,h=a.id(),i=-1,j=!1;;){for(i=-1,f=0;f<d.length;++f)if(g=d[f],g.id()===h){i=f;break}if(-1===i)break;d.splice(i,1),j=!0}j&&e(d)},e.rules.remove.all=function(){e([])},e.raw={},e.raw.value=function(){return c.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,v.style,"",""),e},P=function(a,c,d){c=c||!1;var e=function(b){if(b){var c=d();d=K(b),G(v.sel,a,c,d())}return d()},g=x(),h=[];return e.id=function(){return g},e.type=function(){return v.sel},e.fName=function(){return a},e.styles=function(){return h},e.styles.value=function(){return z(e.styles())},e.styles.add=function(c){c=b(c)?c:[c],h=h.concat(c),E(c.length,v.sel,a)},e.styles.remove=function(b){for(var c=0,d=b.id(),e=b.fName(),f=-1,g=!1;;){for(f=-1,c=0;c<h.length;++c)if(h[c].id()===d){f=c;break}if(-1===f)break;h.splice(f,1),g=!0}g&&F(e,v.sel,a)},e.styles.remove.all=function(){h.length=0,F("All styles",v.sel,a)},e.raw={},e.raw.canBeScoped=function(){return c},e.raw.value=function(){return d.plain()},e.raw.type=function(){return typeof e.raw.value()},f.parent.ex.me(f,e,v.sel,"",""),e},Q=function(a,c,d){var e=D[c.toLowerCase()];if(!e)throw j;var g=-1!==e.indexOf(h),k=function(a){return a=a||"",e.replace(i,a)},l=function(b){if(b){var c=k(d());d=L(b),G(v.at,a,c,k(d()))}return k(d())},m=x(),n={};return l.id=function(){return m},l.type=function(){return v.at},l.fName=function(){return a},g&&(l.sels=function(){var a=[],b="";for(b in n)n.hasOwnProperty(b)&&a.push(b);return a},l.sels.define=function(b){n=b,E("New selectors and styles",v.at,a)},l.sels.add=function(b,c){var d="string"==typeof b?b:b.fName();n[d]=n[d]?n[d].concat(c):c,E(c.length,v.sel,d+" (under "+a+")")},l.sels.remove=function(c,d){var e="string"==typeof c?c:c.fName();if(n[e]){var f=0,g=b(n[e])?n[e]:[];if(g.length>0){for(var h=d.fName(),i=-1,j=!1;;){for(i=-1,f=0;f<g.length;++f)if(g[f].fName()===h){i=f;break}if(-1===i)break;g.splice(i,1),j=!0}j&&(n[e]=g,F(h,v.sel,e+" (under "+a+")"))}}},l.sels.remove.all=function(){n={},F("All styles",v.at,a)},l.styles=function(a){var c=[];return n[a]&&(c=n[a]),b(c)?c:[c]},l.styles.value=function(a){return z(l.styles(a))},l.styles.add=function(a,b){return l.sels.add(a,b)},l.styles.remove=function(a,b){return l.sels.remove(a,b)},l.styles.remove.all=function(b){var c="string"==typeof b?b:b.id();c?n[c]&&(n[c]=[],F("All styles",v.sel,c+" (under "+a+")")):l.sels.remove.all()}),l.raw={},l.raw.rule=function(){return c},l.raw.canEmbedSels=function(){return g},l.raw.hasSpecialSelectors=function(){return c===w.kf},l.raw.value=function(){return d.plain()},l.raw.type=function(){return typeof l.raw.value()},f.parent.ex.me(f,l,v.at,"",c),l};f.xref=function(){return arguments.length>0&&(f.parent.xref(e,Array.prototype.slice.call(arguments,0)),p=!0),f},f.rule=function(a,b,c,d){return N(x(),a,I(b,c,d))},f.style=function(a,b){return O(x(),J(a,b))},f.vars=function(a,b){if(2===arguments.length){if(f.vars[a])throw a+k;f.vars[a]=M(a,H(b))}else if(d(a)){var c=null;for(c in a)if(a.hasOwnProperty(c)){if(f.vars[c])throw c+k;f.vars[c]=M(c,H(a[c]))}}return f},f.sel=function(a,b,c){if(f.sel[a])throw a+k;return f.sel[a]=P(a,c,K(b)),f},f.rules=function(a,b,c,d,e){if(f.rules[a])throw a+k;return f.rules[a]=N(a,b,I(c,d,e)),f},f.styles=function(a,b,c){if(f.styles[a])throw a+k;return f.styles[a]=O(a,J(b,c)),f},f.at=function(a,b,c){if(f.at[a])throw a+k;var d=c||"";return f.at[a]=Q(a,b,L(d)),f},f.write=function(a,b){var d="";switch(d="string"==typeof a||c(a)&&!a.type?v.decl:a.type()){case v.sel:m.push({type:v.sel,item:a}),a.styles.add(b);break;case v.at:m.push({type:v.at,item:a}),a.raw.canEmbedSels()&&a.sels.define(b);break;case v.decl:m.push({type:v.decl,item:a});break;default:throw j}return f},f.done=function(){t||(q=!0,r=!0)},f.load=function(){r&&(s||(s=!0,arguments.length>0&&(u=Array.prototype.slice.call(arguments,0)),q=!0,f.reload()))},f.end=function(){r||(q=!0,t=!0,f.reload())},f.parent=a,f.id=function(){return n},f.isChanged=function(){return q},f.name=function(){return e},f.reload=function(a){((q&&!r||q&&r&&s)&&!f.parent.state.isUpdatesSuspended||a)&&(B(),p&&f.parent.reload.dependents(e))},f.unload=function(){o&&(C(),p&&f.parent.unload.dependents(e))},f.remove=function(){f.unload(),f.parent.css.remove(f.name()),p&&f.parent.remove.dependents(e)}},f=function(){var c=this;c.info={name:function(){return a.NAME},title:function(){return a.TITLE},version:function(){return a.VERSION},copyright:function(){return a.COPYRIGHT},url:function(){return a.URL}},c.settings={},c.settings.isLogChanges=!0,c.settings.isLoadExtensions=!0,c.settings.isReloadOnChange=!0,c.settings.isConsiderScopes=!0,c.state={},c.state.isUpdatesSuspended=!1;var d=[],f={};c.all=function(){return d},c.xref=function(a,b){var c=f[a]||[],d=0,e="";for(d=0;d<b.length;++d)e=b[d],e!==a&&-1===c.indexOf(e)&&c.push(e);f[a]=c},c.css=function(a){if(!a)throw"CSS filename must be defined.";if(c[a])throw'CSS file "'+a+'" is already loaded.';var b=new e(c,a);return c[a]=b,d.push(b),b},c.css.remove=function(a){if(!a)throw"CSS filename must be defined.";if(!c[a])throw'CSS file "'+a+'" is not loaded.';delete c[a];var b=0,e=null,f=-1;for(b=0;b<d.length;++b)if(e=d[b],e.name()===a){f=b;break}-1!==f&&d.splice(f,1)};var g={};c.ex=function(a,d,e,f,h){if(c.settings.isLoadExtensions){e||(e=""),"*"===e&&(e=""),f||(f=""),"*"===f&&(f=""),d=b(d)?d:[d];var i=0,j="",k="";for(i=0;i<d.length;++i){if(j=d[i],k="_"+j+"_"+e+"_"+f+"_"+a,g[k])throw'Extension "'+a+'" is already loaded.';g[k]={exName:a,targetValueType:j,targetValueDataType:e,targetType:f,classFunc:h}}}},c.ex.me=function(a,b,c,d,e){var f=null,h=null;b.parent=b.parent||a;for(h in g)g.hasOwnProperty(h)&&(f=g[h],f.targetValueType!==c||f.targetValueDataType!==d&&""!==f.targetValueDataType||f.targetType!==e&&""!==f.targetType||f.classFunc(b))},c.suspendUpdates=function(){c.state.isUpdatesSuspended=!0},c.resumeUpdates=function(){c.state.isUpdatesSuspended=!1,c.reload.all()},c.load={},c.load.all=function(){var a=0,b=null;for(a=0;a<d.length;++a)b=d[a],b.load.apply(b,arguments)},c.unload={},c.unload.all=function(){var a=0,b=null;for(a=0;a<d.length;++a)b=d[a],b.unload()},c.unload.dependents=function(a){var b=f[a]||[],d=0,e="",g=null;for(d=0;d<b.length;++d)e=b[d],g=c[e],g&&g.unload()},c.reload={},c.reload.all=function(a){var b=0,c=null;for(b=0;b<d.length;++b)c=d[b],c.reload(a)},c.reload.dependents=function(a){var b=f[a]||[],d=0,e="",g=null;for(d=0;d<b.length;++d)e=b[d],g=c[e],g&&g.reload()},c.remove={},c.remove.all=function(){c.unloadAll();var a=0,b=null;for(a=0;a<d.length;++a)b=d[a],delete c[b.name()];d=[]},c.remove.dependents=function(a){var b=f[a]||[],d=0,e="",g=null;for(d=0;d<b.length;++d)e=b[d],g=c[e],g&&g.remove()}};window.JS3=new f}(),function(){"use strict";JS3.ex("math",["declaration","variable"],"number","*",function(a){a.add=function(b){if("number"!=typeof b)throw"invalid argument";a(a.raw.value()+b)},a.substract=function(b){if("number"!=typeof b)throw"invalid argument";a(a.raw.value()-b)},a.multiply=function(b){if("number"!=typeof b)throw"invalid argument";a(a.raw.value()*b)},a.divide=function(b){if("number"!=typeof b)throw"invalid argument";a(a.raw.value()/b)}})}();