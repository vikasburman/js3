/*! JS3 - JavaScript Style Sheet  
 *  Version 0.8.5 (Build 18-03-2014) 
 *  Copyright (C) 2014 Vikas Burman. All rights reserved. 
 * 
 *  Project: https://github.com/vikasburman/js3 
 *  License: https://raw.github.com/vikasburman/js3/master/LICENSE.md 
 *  Commercial: http://www.vikasburman.com/js3 
 */ 
!function(){"use strict";var a={NAME:"JS3",TITLE:"JavaScript Style Sheets",VERSION:"0.8.5",COPYRIGHT:"Copyright (C) 2014 Vikas Burman. All rights reserved.",URL:"https://github.com/vikasburman/js3"},b=function(a){return a&&"[object Array]"===Object.prototype.toString.call(a)},c=function(a){return a&&"function"==typeof a},d=function(a){return a&&"string"==typeof a},e=function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)&&"Object"===a.constructor.name},f=function(a,b){return new[].constructor(b+1).join(a)},g={vars:"variable",style:"style",rule:"rule",sel:"selector",at:"at-rule",dir:"direct"},h=function(a,h){var i=this,j="invalid argument",k=" already defined",l="not supported",m="nested scopes cannot be applied",n=[],o=[],p=[],q=!1,r=!1,s=!0,t="",u="",v=0,w=!1,x=!1,y=!1,z=!1,A=!1,B=!1,C="~",D="$",E="@",F="&",G="%",H=function(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"_"+a()+a()+"_"+a()+"_"+a()+"_"+a()+"_"+a()+a()+a()},I=function(){return"js3_"+h+H()},J=function(){return a.settings.isGeneratePrettyCSS?"\n":""},K=function(){return a.settings.isGeneratePrettyCSS?f("	",v+1):""},L=function(b,c){return a.settings.isGeneratePrettyCSS?c?" "+b:b+" ":b},M=function(a,d){var f="",h=null,j="",k="",l="",m=0;if(d||(d=0),c(a)&&c(a.type)&&a.type()===g.style&&(a=[a]),b(a))for(m=0;m<a.length;++m)h=a[m],h.isOn()&&(k=h.apply(i),f+=(m>0?J():"")+k);else if(e(a)){for(j in a)a.hasOwnProperty(j)&&(k=a[j],k&&(0===d?f+=K()+j+L(":")+k.toString()+";"+J():1===d&&(v++,f+=K()+j+L("{",!0)+J(),v++,f+=M(k),v--,f+=J()+K()+L("}")+J(),v--)));l=J(),l.length>0&&f.substring(f.length-l.length)===l&&(f=f.substring(0,f.length-l.length))}return f},N=function(b,c,d){var e="",f="",h=0,i=0,j=null,k=null;if(d.type===g.dir)return void(b.itemCss=d.directValue+J());if(d.type===g.at&&0===d.children.length&&0===d.siblings.length&&!d.stylesLiteral&&0===d.styles.length)return void(b.itemCss=d.selector+(d.atRuleValue?" "+d.atRuleValue:"")+";"+J());if(d.canBeScoped&&a.settings.isConsiderScopes&&u?c+=" "+u+d.selector:0===d.siblings.length&&(c+=" "+d.selector),c=c.trim(),0!==d.siblings.length){if(k=d.siblings[d.siblings.length-1],k.stylesLiteral||0!==k.styles.length){for(e+=c+" "+d.selector+","+J(),h=0;h<d.siblings.length;++h)j=d.siblings[h],e+=c+" "+j.selector+","+J();f=J(),f.length>0&&e.substring(e.length-f.length)===f&&(e=e.substring(0,e.length-f.length)),e+=L("{",!0)+J(),k.stylesLiteral?e+=M(k.stylesLiteral):0!==k.styles.length&&(e+=M(k.styles)),e+=J()+"}"+J()}}else d.stylesLiteral||0!==d.styles.length?(e+=(d.isAtRule&&d.parent?K():"")+c+(d.atRuleValue?" "+d.atRuleValue:"")+L("{",!0)+J(),d.stylesLiteral?e+=M(d.stylesLiteral,d.isAtRule&&"@keyframes"===d.selector?1:0):0!==d.styles.length&&(e+=M(d.styles)),e+=J()+(d.isAtRule&&d.parent?K():"")+"}"+J()):d.isAtRule&&(e+=c+(d.atRuleValue?" "+d.atRuleValue:"")+L("{",!0)+J(),c="");if(e&&(b.itemCss+=e),0!==d.children.length)for(i=0;i<d.children.length;++i)N(b,c,d.children[i]);s&&d.isAtRule&&!d.stylesLiteral&&0===d.styles.length&&(b.itemCss+="}"+J())},O=function(){var a="",b={itemCss:""},c=0;for(c=0;c<n.length;++c)b.itemCss="",N(b,"",n[c]),a+=b.itemCss||"";return a},P=function(){var b=null,c=null,d=t;a.settings.isLoadOnDOM&&(t=I(),c=window.document.createElement("style"),c.id=t,c.innerHTML=O(),window.document.getElementsByTagName("head")[0].appendChild(c),d&&(b=window.document.getElementById(d),b.parentNode.removeChild(b))),w=!0,x=!1},Q=function(){if(w&&a.settings.isLoadOnDOM){var b=window.document.getElementById(t);b.parentNode.removeChild(b),t="",w=!1,x=!0}},R=function(){x=!0,w&&a.settings.isReloadOnChange&&(i.reload(),a._.state.isChangeHandlersAttached&&a._.raiseEvent({css:i,type:"valueChanged"}))},S=function(){x=!0,w&&a.settings.isReloadOnChange&&(i.reload(),a._.state.isChangeHandlersAttached&&a._.raiseEvent({css:i,type:"statusChanged"}))},T=function(a,b){var c="",d="",e=0;for(e=0;e<o.length;++e)d=o[e],c+=K()+a.replace(C,d)+L(":")+b+";"+J();return c},U=function(b,d){var e=null,f=!0,h=function(a){var b=a;return c(b)&&(b=b.apply(i)),b};h.plain=function(){return h(e)};var j=function(a){if(f&&(f=!1,e=d),a){var c=h(e);d=a,e=a,R(g.vars,b,c,h(e))}return h(e)};j();var k=H();return j.id=function(){return k},j.type=function(){return g.vars},j.fName=function(){return b},j.raw=function(){return h.plain()},j.raw.type=function(){var a=j.raw();return"object"==typeof a&&c(a.type)?a.type():typeof a},a._.exObj(i,j,g.vars,j.raw.type(),""),j},V=function(b,f,h,j,k){var m=null,n=!0,o=function(a){var b="";return a=a.toString(),a&&(f&&(b=T(h,a)),b+=K()+h.replace(C,"")+L(":")+a+";"+J()),b},p=function(a,b){var d=a;return c(a)&&(d=a.apply(i)),d&&k&&!b&&(d=c(k)?d.toString()+k.apply(i).toString():d.toString()+k.toString()),d};p.plain=function(){return p(m,!0)};var q=function(a,c){if(n)if(n=!1,e(j))m=j[Object.keys(j)[0]];else if(d(j)){if(j.substring(0,1)===G)throw l;m=j}else m=j;if(arguments.length>0){var f="",h=null,i=null;e(a)?(j=a,h=a[Object.keys(a)[0]]):d(a)?a.substring(0,1)===G?(f=a.substring(1),h=j[f]):(j=a,h=a):(j=a,h=a),i=o(m),c&&(k=c),m=h,R(g.rule,b,i,o(m))}return o(p(m))};q();var r=H(),s=!0;return q.id=function(){return r},q.type=function(){return g.rule},q.fName=function(){return b},q.off=function(){s&&(s=!1,S(g.rule,b,"on","off"))},q.on=function(){s||(s=!0,S(g.rule,b,"off","on"))},q.isOn=function(){return s},e(j)&&(q.select=function(a){c(a)&&(a=a.apply(i)),q(G+a)}),q.raw=function(){return p.plain()},q.raw.type=function(){var a=q.raw();return"object"==typeof a&&c(a.type)?a.type():typeof a},q.raw.property=function(){return h},q.raw.hasPrefixes=function(){return f},q.raw.suffix=function(){var a=p(),b=q.prop.value();return a.replace(b,"")},a._.exObj(i,q,g.rule,q.raw.type(),h),q},W=function(f,h){var j=null,k=!0,m=function(a){var b="",d="",f="",h=0,j=null,k=null;if(e(a))for(f in a)a.hasOwnProperty(f)&&(j=a[f],j&&(j=c(j)?j.apply(i).toString():j.toString(),-1!==f.indexOf(C)&&(k=T(f,j)),k=K()+f.replace(C,"")+L(":")+j+";"+J(),b+=k));else for(h=0;h<a.length;++h)k=a[h],k.isOn()&&(j=k.apply(i),k.type()===g.style&&(j+=J()),b+=j);return d=J(),d.length>0&&b.substring(b.length-d.length)===d&&(b=b.substring(0,b.length-d.length)),b},n=function(a){var c=null;return c=e(a)?a:b(a)?a:[a]};n.plain=function(){return n(j)};var o=function(a){var b="",c=null;if(k){if(k=!1,d(h)&&h.substring(0,1)===G)throw l;j=e(h)?h[Object.keys(h)[0]]:h}if(arguments.length>0){d(a)&&a.substring(0,1)===G?(b=a.substring(1),c=h[b]):e(a)?(h=a,c=a[Object.keys(a)[0]]):(h=a,c=a);var i=m(n(j));j=c,R(g.style,f,i,m(n(j)))}return m(n(j))};o();var p=H(),q=!0;return o.id=function(){return p},o.type=function(){return g.style},o.fName=function(){return f},o.off=function(){q&&(q=!1,S(g.style,f,"on","off"))},o.on=function(){q||(q=!0,S(g.style,f,"off","on"))},o.isOn=function(){return q},o.rules=function(){return n.plain()},o.rules.add=function(a,c){var d=n.plain();d=b(d)?d.slice(0):[d],a=b(a)?a:[a],d=c?a.concat(d):d.concat(a),o(d)},o.rules.remove=function(a){var c=n.plain(),d=0,e=-1,f=null,g=a.id(),h=!1;for(c=b(c)?c.slice(0):[c];;){for(e=-1,d=0;d<c.length;++d)if(f=c[d],f.id()===g){e=d;break}if(-1===e)break;c.splice(e,1),h=!0}h&&o(c)},o.rules.remove.all=function(){o([])},e(h)&&(o.select=function(a){c(a)&&(a=a.apply(i)),o(G+a)}),o.raw=function(){return n.plain()},o.raw.type=function(){return typeof o.raw()},a._.exObj(i,o,g.style,"",""),o};i._={},i._.prefixes=function(){if(z||y)throw l;var a=0,b="";for(a=0;a<arguments.length;++a){if(b=arguments[a],c(b)&&(b=b.apply(i).toString()),-1!==o.indexOf(b))throw b+k;o.push(b)}},i._.rule=function(a,b,c){if(z||y)throw l;if(a){var d="",e=!1,f=-1,g=null;if("["===a.substring(0,1)){if(f=a.indexOf("]"),d=a.substring(1,f),a=a.substring(f+1).trim(),i.rules[d])throw d+k}else d=H();return-1!==a.indexOf(C)&&(e=!0),g=V(d,e,a,b,c),i.rules[d]=g,g}},i._.style=function(){if(z||y)throw l;var a="",b=null,f=null,h=null,j=0,m=[];for(j=0;j<arguments.length;++j){if(h=arguments[j],0===j){if(d(h)){if(a=h,i.styles[a])throw a+k;continue}a=H()}if(e(h)){f=h;break}c(h)&&c(h.type)&&h.type()===g.rule?m.push(h):c(h)&&c(h.type)&&h.type()===g.style&&m.push(h)}return b=W(a,f||m),i.styles[a]=b,b},i._.vars=function(a,b){if(z||y)throw l;var c=null,d=null;if(2===arguments.length){if(i.vars[a])throw a+k;return c=U(a,b),i._.vars[a]=c,i.vars[a]=c,c}if(e(a)){for(d in a)if(a.hasOwnProperty(d)){if(i.vars[d])throw d+k;c=U(d,a[d]),i._.vars[d]=c,i.vars[d]=c}return null}},i._.$$=function(){if(z||y)throw l;var a=null,b=null,f=null,h=null,k=0;if(0===arguments.length?0!==p.length&&p.pop():s?p=[]:0!==p.length&&(f=p[p.length-1]),h={type:"",selector:"",directValue:"",atRuleValue:"",canBeScoped:!1,isAtRule:!1,parent:f,stylesLiteral:null,styles:[],siblings:[],children:[]},0!==arguments.length){for(k=0;k<arguments.length;++k)if(a=arguments[k],0!==k)if(h.isAtRule&&1===k&&d(a))h.atRuleValue=a;else if(e(a))h.stylesLiteral=a;else if(c(a)&&c(a.type)&&a.type()===g.style)h.styles.push(a);else{if(!c(a)||!c(a.type)||a.type()!==g.rule)throw j;h.styles.push(i._.style(a))}else{if(c(a)&&(a=a.apply(i).toString()),a.substring(0,1)===D){if(!s)throw m;a=a.substring(1),h.type=g.sel,h.canBeScoped=!0,h.selector=a;continue}if(a.substring(0,1)===E){h.type=g.at,h.isAtRule=!0,h.selector=a;continue}if(a.substring(0,1)===F){h.type=g.dir,h.directValue=a.substring(1);continue}h.type=g.sel,h.selector=a}if(h.parent)if(q)h.parent.children.push(h),p.push(h);else{if(!r)throw l;h.parent.siblings.push(h)}else n.push(h),p.push(h)}return b={},s||(b.up=function(){var a=s,b=i._.$$,c=null;return q=!1,s=!1,c=b.apply(i,[]),q=!1,s=a,c}),r&&!h.stylesLiteral&&0===h.styles.length&&delete b.up,r||(b.$$=function(){var a=s,b=i._.$$,c=null;return q=!0,s=!1,c=b.apply(i,arguments),q=!1,s=a,c}),s||h.isAtRule||h.stylesLiteral||0!==h.styles.length||(b.join=function(){var a=s,b=i._.$$,c=null;return r=!0,s=!1,c=b.apply(i,arguments),r=!1,s=a,c}),b},i._.end=function(a){if(z||y)throw l;0===arguments.length&&(a=!0),a?y||(x=!0,z=!0,i.reload()):z||(x=!0,y=!0)},i.vars={},i.styles={},i.rules={},i.parent=a,i.id=function(){return t},i.isChanged=function(){return x},i.name=function(){return h},i.toCSS=function(b){var c=a.settings.isGeneratePrettyCSS,d=0,e=0,f="";return arguments.length>0&&(a.settings.isGeneratePrettyCSS=b),d=window.performance.now(),f=O(),e=window.performance.now(),window.console.log("js3 > css: "+(e-d).toPrecision(6)+" ms"),a.settings.isGeneratePrettyCSS=c,f},i.load=function(a){y&&(!A||A&&!w)&&(A=!0,a&&(u=a),x=!0,i.reload())},i.reload=function(b,c){if((x&&!y||x&&y&&A)&&!a._.state.isUpdatesSuspended||b&&(A||z)){if(c&&B)return;P(),B=!1,a._.xref.hasDependents(h)&&a._.reloadDependents(h,b)}},i.unload=function(b){w&&(B||b||(B=!0),Q(),a._.xref.hasDependents(h)&&a._.unloadDependents(h))},i.remove=function(){i.unload(),a.remove(i.name()),a._.xref.hasDependents(h)&&a._.removeDependents(h)}},i=function(){var d=this,e=[],f=[],i={},j={},k={},l={},m=" is already loaded",n=" is a reserved name";d.info={name:function(){return a.NAME},title:function(){return a.TITLE},version:function(){return a.VERSION},copyright:function(){return a.COPYRIGHT},url:function(){return a.URL}},d.settings={},d.settings.isLoadExtensions=!0,d.settings.isLoadOnDOM=!0,d.settings.isReloadOnChange=!0,d.settings.isConsiderScopes=!0,d.settings.isGeneratePrettyCSS=!1,d._={},d._.state={},d._.state.isUpdatesSuspended=!1,d._.state.isChangeHandlersAttached=!1,d._.xref=function(a,b){var c="",d=0,e=null;for(d=0;d<b.length;++d)c=b[d],c!==a&&(e=i[c]||[],-1===e.indexOf(a)&&(e.push(a),i[c]=e))},d._.xref.hasDependents=function(a){return b(i[a])&&i[a].length>0},d._.raiseEvent=function(a){var b=0;for(b=0;b<f.length;++b)f[b].handler(a)},d._.reloadDependents=function(a,b){var c=i[a]||[],e=0,f="",g=null;for(e=0;e<c.length;++e)f=c[e],g=d[f],g&&g.reload(b,!0)},d._.removeDependents=function(a){var b=i[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.remove()},d._.unloadDependents=function(a){var b=i[a]||[],c=0,e="",f=null;for(c=0;c<b.length;++c)e=b[c],f=d[e],f&&f.unload(!0)},d._.exObj=function(a,b,c,d,e){var f=null,g=null,h=null,i=null,l="",m=[],n=[],o=function(){return b.apply(a,arguments),b};for(g in j)if(j.hasOwnProperty(g)&&(f=j[g],!(-1===f.targetFilter.objectType.indexOf(c)||f.targetFilter.dataType&&-1===f.targetFilter.dataType.indexOf(d)||f.targetFilter.type&&-1===f.targetFilter.type(e)))){m=["css","parent","name","object","raw","value","update"],n=[a,a.parent,a.name(),b,b.raw,b,o];for(l in k)k.hasOwnProperty(l)&&(i=k[l],m.push(i.name),n.push(i.defn));m.push(f.body),h=Function.apply(null,m),h.apply(a,n)}},d.define=function(a,c,f){var g=null,i=null,j=null,l=null,o=null,p="",q="",r="",s=0,t=["css","parent","name","prefixes","vars","style","styles","rule","rules","$$","end"],u=[],v=[],w=[];if(b(c)?(v=c,i=f):i=c,d[a])throw a+m;if(-1!==t.indexOf(a))throw a+n;if(g=new h(d,a),d[a]=g,e.push(g),p=i.toString(),p=p.substring(p.indexOf("{")+1,p.lastIndexOf("}")),u=[g,g.parent,a,g._.prefixes,g._.vars,g._.style,g.styles,g._.rule,g.rules,g._.$$,g._.end],v.length>0){for(s=0;s<v.length;++s)if(q=v[s],q!==a){if(l=d[q],!l)throw q+" is not loaded.";w.push(q),t.push(q),u.push(l)}w.length>0&&d._.xref(a,w)}for(r in k)k.hasOwnProperty(r)&&(o=k[r],t.push(o.name),u.push(o.defn));return t.push(p),j=Function.apply(null,t),j.apply(g,u),g},d.ex={},d.ex.op=function(a,e,f){if(d.settings.isLoadExtensions){c(e)?(f=e,e={}):b(e)&&(e={objectType:e}),e.objectType||(e.objectType=[g.vars,g.style,g.rule]),e.dataType&&(e.dataType=b(e.dataType)||[e.dataType]),e.type&&(e.type=b(e.type)||[e.type]),e.objectType=b(e.objectType)?e.objectType:[e.objectType];var h=0,i="",k="",l="";for(h=0;h<e.objectType.length;++h){if(i=e.objectType[h],k="_"+i+"_"+a,j[k])throw k+m;l=f.toString(),l=l.substring(l.indexOf("{")+1,l.lastIndexOf("}")),j[k]={exName:a,targetFilter:e,body:l}}}},d.ex.fn=function(a,b){if(d.settings.isLoadExtensions){if(-1!==["css","parent","name","object","raw","value","update"].indexOf(a))throw a+n;if(k["_"+a])throw a+m;k["_"+a]={name:a,defn:b}}},d.ex.ty=function(a,b){if(d.settings.isLoadExtensions){if(l[a])throw a+m;l[a]=b}},d.types=function(a){return l[a]?l[a]:null},d.onChange=function(a,b){var e=0,g=-1;for(e=0;e<f.length;++e)if(f[e].name===a){g=e;break}c(b)?(d._.state.isChangeHandlersAttached=!0,-1===g?f.push({name:a,handler:b}):f[g].handler=b):(-1!==g&&f.splice(g,1),0===f.length&&(d._.state.isChangeHandlersAttached=!1))},d.all=function(){return e},d.suspendUpdates=function(){d._.state.isUpdatesSuspended=!0},d.isUpdatesSuspended=function(){return d._.state.isUpdatesSuspended},d.resumeUpdates=function(){d._.state.isUpdatesSuspended=!1,d.reload.all()},d.load={},d.load.all=function(){var a=0,b=null;for(a=0;a<e.length;++a)b=e[a],b.load.apply(b,arguments)},d.unload={},d.unload.all=function(){var a=0,b=null;for(a=0;a<e.length;++a)b=e[a],b.unload()},d.reload={},d.reload.all=function(a){var b=0,c=null;for(b=0;b<e.length;++b)c=e[b],c.reload(a)},d.remove=function(a){var b=0,c=-1,f=null;if(d[a]){for(delete d[a],b=0;b<e.length;++b)if(f=e[b],f.name()===a){c=b;break}-1!==c&&e.splice(c,1)}},d.remove.all=function(){var a=0,b=null;for(d.unload.all(),a=0;a<e.length;++a)b=e[a],delete d[b.name()];e=[]}};if(window.JS3=new i,window.JS3Settings&&e(window.JS3Settings)){var j="";for(j in window.JS3Settings)window.JS3Settings.hasOwnProperty(j)&&window.JS3.settings[j]&&(window.JS3.settings[j]=window.JS3Settings[j]);delete window.JS3Settings}}(),function(){function a(a){return a%=360,0>a?360+a:a}function b(a){return a>>>0}function d(a){return a.replace(/^\s+/,"").replace(/\s+$/,"").toLowerCase()}function e(a,b){return Array.prototype.slice.call(a,b)}function f(a,b,c){return a>b?c>a?a:c:b}function g(a,b,c){return(1-c)*a+c*b}function h(a){return a=Math.round(255*a),a>0?255>a?255&a:255:0}function i(a){return a/255}function j(a,b,c){var d,e,f=Math.max(a,b,c),g=Math.min(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return[d,e,h]}function k(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(0==b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a),g=d(i,h,a-1/3)}return[e,f,g]}function l(a){for(var b=[parseInt(a.substr(1,1),16),parseInt(a.substr(2,1),16),parseInt(a.substr(3,1),16),1],c=0;3>c;++c)b[c]=(16*b[c]+b[c])/255;return b}function m(a){return[parseInt(a.substr(1,2),16)/255,parseInt(a.substr(3,2),16)/255,parseInt(a.substr(5,2),16)/255,1]}function n(a){var b,c,d=a[0],e=a[1],f=a[2],g=Math.min(Math.min(d,e),f),h=Math.max(Math.max(d,e),f),i=h;return h==g?c=0:h==d?c=60*((e-f)/(h-g))%360:h==e?c=60*((f-d)/(h-g))+120:h==f&&(c=60*((d-e)/(h-g))+240),0>c&&(c+=360),b=0==h?0:1-g/h,[Math.round(c),Math.round(100*b),Math.round(100*i),a[3]]}function o(b){var c=a(b[0]),d=b[1],e=b[2],d=d/100,e=e/100,f=Math.floor(c/60%6),g=c/60-f,h=e*(1-d),i=e*(1-g*d),j=e*(1-(1-g)*d),k=[];switch(f){case 0:k=[e,j,h];break;case 1:k=[i,e,h];break;case 2:k=[h,e,j];break;case 3:k=[h,i,e];break;case 4:k=[j,h,e];break;case 5:k=[e,h,i]}return[k[0],k[1],k[2],b[3]]}function p(b){var c=j(b[0],b[1],b[2]);return c[0]=a(Math.floor(360*c[0])),c[1]=Math.floor(100*c[1]),c[2]=Math.floor(100*c[2]),c}function q(a){var b=p(a);return b.push(a[3]),b}function r(a){var b=parseFloat(a[0])/360,c=parseFloat(a[1])/100,d=parseFloat(a[2])/100,e=k(b,c,d);return[e[0],e[1],e[2],parseFloat(a[3])]}function s(a){this._value=a}function t(a,b){if(void 0==b)return h(this._value[a]);var c=e(this._value,0);if("string"!=typeof b){var d=this.clone();return d._value[a]=b,d}var f;if(f=b.match(/^([+\-\\*]=?)([0-9.]+)/)){var g=f[1],i=parseFloat(f[2]);switch(g[0]){case"+":c[a]+=i/255;break;case"-":c[a]-=i/255;break;case"*":c[a]*=i}return"="==g[1]?(this._value=c,this):new s(c)}}function u(b){return function(){function c(c,d,e){e=parseFloat(e);var f=n(c._value),g=0;switch(d){case"=":f[b]=e,g=1;break;case"+":f[b]+=e,g=1;break;case"+=":f[b]+=e;break;case"-":f[b]-=e,g=1;break;case"-=":f[b]-=e;break;case"*":f[b]*=e,g=1;break;case"*=":f[b]*=e;break;default:throw"Bad op "+d}return 0==b?f[b]=a(f[b]):(1==b||2==b)&&(f[b]<0?f[b]=0:f[b]>99&&(f[b]=99)),g&&(c=c.clone()),c._value=o(f),c}if(0==arguments.length)return n(this._value)[b];if(1==arguments.length){var d;return"string"==typeof arguments[0]&&(d=arguments[0].match(/^([\+\-\*]=?)([0-9.]+)/))?c(this,d[1],d[2]):c(this,"=",arguments[0])}return 2==arguments.length?c(this,arguments[0],arguments[1]):void 0}}var v={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,216],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[216,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},w={byteOrPercent:function(a){var b;return"string"==typeof a&&(b=a.match(/^([0-9]+)%$/))?Math.floor(255*parseFloat(b[1])/100):parseFloat(a)},floatOrPercent:function(a){var b;return"string"==typeof a&&(b=a.match(/^([0-9]+)%$/))?parseFloat(b[1])/100:parseFloat(a)},numberOrPercent:function(a,b){var c;return"string"==typeof a&&(c=a.match(/^([0-9]+)%$/))?parseFloat(c[1])/100*b:parseFloat(a)},rgba:function(a){for(var b=0;3>b;++b)a[b]=i(w.byteOrPercent(a[b]));return a[3]=w.floatOrPercent(a[b]),new s(a)},rgba8:function(a){return new s([i(w.byteOrPercent(a[0])),i(w.byteOrPercent(a[1])),i(w.byteOrPercent(a[2])),i(w.byteOrPercent(a[3]))])},float3:function(a){for(var b=0;3>b;++b)a[b]=w.floatOrPercent(a[b]);return a[3]=1,new s(a)},float4:function(a){for(var b=0;3>b;++b)a[b]=w.floatOrPercent(a[b]);return a[3]=w.floatOrPercent(a[b]),new s(a)},hsla:function(a){return a[0]=w.numberOrPercent(a[0],360),a[1]=w.numberOrPercent(a[1],100),a[2]=w.numberOrPercent(a[2],100),a[3]=w.numberOrPercent(a[3],1),new s(r(a))},hsva:function(b){return b[0]=a(parseFloat(b[0])),b[1]=Math.max(0,Math.min(100,parseFloat(b[1]))),b[2]=Math.max(0,Math.min(100,parseFloat(b[2]))),b[3]=w.floatOrPercent(b[3]),new s(o(b))}},x={keyword:{},hex3:{},hex7:{},rgb:{parse:function(a){return a=a.slice(0),a.push(1),w.rgba(a)}},rgba:{parse:w.rgba},hsl:{parse:function(a){return a=a.slice(0),a.push(1),w.hsla(a)}},hsla:{parse:w.hsla},hsv:{parse:function(a){return a=a.slice(0),a.push(1),w.hsva(a)}},hsva:{parse:w.hsva},rgb8:{parse:function(a){return a=a.slice(0),a.push(1),w.rgba(a)}},rgba8:{parse:function(a){return w.rgba8(a)}},packed_rgba:{parse:function(a){return a=[a>>24&255,a>>16&255,a>>8&255,(255&a)/255],w.rgba(a)},output:function(a){return b(h(a[0])<<24|h(a[1])<<16|h(a[2])<<8|h(a[3]))}},packed_argb:{parse:function(a){return a=[a>>16&255,a>>8&255,a>>0&255,(a>>24&255)/255],w.rgba(a)},output:function(a){return b(h(a[3])<<24|h(a[0])<<16|h(a[1])<<8|h(a[2]))}},float3:{parse:w.float3},float4:{parse:w.float4}},y=function(){var a=null;if(arguments[0]instanceof s)return new s(arguments[0]._value);if("string"==typeof arguments[0]){var b=arguments[0][0];if("#"==b){if(a=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new s(l(a[0]));if(a=arguments[0].match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/i))return new s(m(a[0]))}else{if(a=x[arguments[0].toLowerCase()])return a.parse(2==arguments.length?arguments[1]:e(arguments,1));if(a=arguments[0].match(/^\s*([A-Z][A-Z0-9_]+)\s*\(\s*([\-0-9A-FX]+)\s*\)\s*$/i)){var c=x[a[1].toLowerCase()];return c.parse(a[2])}if(a=arguments[0].match(/^\s*([A-Z][A-Z0-9]+)\s*\(\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*,\s*([0-9\.]+%?)\s*(,\s*([0-9\.]+%?)\s*)?\)\s*$/i)){var c=x[a[1].toLowerCase()];if(void 0===a[5]){var f=[a[2],a[3],a[4]];return c.parse(f)}var f=[a[2],a[3],a[4],a[6]];return c.parse(f)}if(1==arguments.length&&(a=v[d(arguments[0])])){var f=a;return new s([i(f[0]),i(f[1]),i(f[2]),1])}}}throw"Could not parse color '"+arguments[0]+"'"},z={white:y("white"),black:y("black"),gray:y("gray")},A={clone:function(){return new s(this._value.slice(0))},html:function(){var a=this,b=this._value,c={hex3:function(){return a.hex3()},hex6:function(){return a.hex6()},rgb:function(){return"rgb("+a.rgb().join(",")+")"},rgba:function(){return"rgba("+a.rgba().join(",")+")"},hsl:function(){return"hsl("+p(b).join(",")+")"},hsla:function(){return"hsla("+q(b).join(",")+")"},keyword:function(){var a,c=195076;for(B in v){for(var d=v[B],e=0,f=0;3>f;++f){var g=b[f]-i(d[f]);e+=g*g}c>e&&(a=B,c=e)}return a}},d=arguments[0]||"rgba";return c[d]()},red:function(){return t.call(this,0,arguments[0])},green:function(){return t.call(this,1,arguments[0])},blue:function(){return t.call(this,2,arguments[0])},alpha:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=w.floatOrPercent(arguments[0]),c):this._value[3]},alpha8:function(){return 1==arguments.length?(c=this.clone(),c._value[3]=w.byteOrPercent(arguments[0])/255,c):Math.floor(255*this._value[3])},grayvalue:function(){var a=this._value;return(a[0]+a[1]+a[2])/3},grayvalue8:function(){return h(this.grayvalue())},luminanceFast:function(){var a=this._value;return.2126*a[0]+.7152*a[1]+.0722*a[2]},luminance:function(){function a(a){return.03928>a?a/12.92:Math.pow((a+.055)/1.055,2.4)}var b=a(this._value[0]),c=a(this._value[1]),d=a(this._value[2]);return.2126*b+.7152*c+.0722*d},luminance8:function(){return h(this.luminance())},luminanceFast8:function(){return h(this.luminanceFast())},hsv:function(){return n(this._value).slice(0,3)},hsva:function(){return n(this._value)},packed_rgba:function(){return x.packed_rgba.output(this._value)},packed_argb:function(){return x.packed_argb.output(this._value)},hue:u(0),saturation:u(1),value:u(2),clamp:function(){var a=this._value;return new s([f(a[0],0,1),f(a[1],0,1),f(a[2],0,1),f(a[3],0,1)])},blend:function(a,b){"number"!=typeof b&&(b=w.floatOrPercent(b));var c=this,d=y(a);return new s([g(c._value[0],d._value[0],b),g(c._value[1],d._value[1],b),g(c._value[2],d._value[2],b),g(c._value[3],d._value[3],b)])},add:function(a){var b=this._value,c=y(a)._value;return new s([b[0]+c[0]*c[3],b[1]+c[1]*c[3],b[2]+c[2]*c[3],b[3]])},inc:function(a){var b=this._value,c=y(a)._value;return b[0]+=c[0]*c[3],b[1]+=c[1]*c[3],b[2]+=c[2]*c[3],this},dec:function(a){var b=this._value,c=y(a)._value;return b[0]-=c[0]*c[3],b[1]-=c[1]*c[3],b[2]-=c[2]*c[3],this},subtract:function(a){var b=this._value,c=y(a)._value;return new s([b[0]-c[0]*c[3],b[1]-c[1]*c[3],b[2]-c[2]*c[3],b[3]])},multiply:function(a){var b=this._value,c=y(a)._value;return new s([b[0]*c[0],b[1]*c[1],b[2]*c[2],b[3]*c[3]])},scale:function(a){var b=this._value;return new s([b[0]*a,b[1]*a,b[2]*a,b[3]])},xor:function(a){var b=this.rgba8(),c=y(a).rgba8();return y("rgba8",b[0]^c[0],b[1]^c[1],b[2]^c[2],b[3])},tint:function(a){return this.blend(z.white,a)},shade:function(a){return this.blend(z.black,a)},tone:function(a){return this.blend(z.gray,a)},complement:function(){var b=this.hsva();return b[0]=a(b[0]+180),new s(o(b))},triad:function(){return[new s(this._value),this.hue("+120"),this.hue("+240")]},hueSet:function(){for(var a=0,b=[],c=100;c>=30;c-=35)for(var d=100;d>=30;d-=35)b.push(this.hue("+",a).saturation(c).value(d));return b},hueRange:function(a,b){for(var c=this.hue(),d=[],e=0;b>e;++e){var f=c+2*(e/(b-1)-.5)*a;d.push(this.hue("=",f))}return d},contrastWhiteBlack:function(){return y(this.value()<50?"white":"black")},contrastGray:function(){var a=this.hsva(),b=a[2]<30?a[2]+20:a[2]-20;return new s(o([a[0],0,b,a[3]]))},contrastText:function(){var a=this._value,b=.241*a[0]*a[0]+.691*a[1]*a[1]+.068*a[2]*a[2];return y(.51>b?"white":"black")},hex3:function(){function a(a){return Math.min(Math.round(h(a)/16),15).toString(16)}return"#"+a(this._value[0])+a(this._value[1])+a(this._value[2])},hex6:function(){function a(a){var b=h(a).toString(16);return b.length<2?"0"+b:b}return"#"+a(this._value[0])+a(this._value[1])+a(this._value[2])},rgb:function(){var a=this._value;return[h(a[0]),h(a[1]),h(a[2])]},rgba:function(){var a=this._value;return[h(a[0]),h(a[1]),h(a[2]),a[3]]},rgb8:function(){var a=this._value;return[h(a[0]),h(a[1]),h(a[2])]},rgba8:function(){var a=this._value;return[h(a[0]),h(a[1]),h(a[2]),this.alpha8()]},float3:function(){return[this._value[0],this._value[1],this._value[2]]},float4:function(){return[this._value[0],this._value[1],this._value[2],this._value[3]]}};A.sub=A.subtract,A.mul=A.multiply;for(var B in A)s.prototype[B]=A[B];y.float3=function(a,b,c){return new s([a,b,c,1])},y.float4=function(a,b,c,d){return new s([a,b,c,d])},y.version="0.2.5",y.Color=s,"undefined"!=typeof module&&module.exports?module.exports=y:"undefined"!=typeof window?(window.pusher=window.pusher||{},window.pusher.color=y):"undefined"!=typeof self&&(self.pusher=self.pusher||{},self.pusher.color=y)}(),function(){"use strict";JS3.ex.ty("ColorWrapper",function(a){this.color=function(){return a},this.type=function(){return"color"},this.toString=function(b){return a.html(b)}}),JS3.ex.fn("color",function(a){if(!a)throw"invalid argument";var b=JS3.types("ColorWrapper");return new b(pusher.color(a))}),JS3.ex.fn("shades",function(a,b,c,d){if(!a&&!b)throw"invalid argument";var e=JS3.types("ColorWrapper"),f=pusher.color(a),g=0,h=[],i=[];switch(b){case"tri":h=f.triad();break;case"hue":h=f.hueSet();break;case"range":if(!c&&!d)throw"invalid argument";h=f.hueRange(c,d)}for(g=0;g<h.length;++g)i.push(new e(h[g]));return i}),JS3.ex.op("colorOperations",{objectType:["variable","rule"],dataType:"color"},function(){var a=JS3.types("ColorWrapper"),b="invalid argument";object.r=function(b){return 0===arguments.length?raw().color().red():update(new a(raw().color().red(b)))},object.g=function(b){return 0===arguments.length?raw().color().green():update(new a(raw().color().green(b)))},object.b=function(b){return 0===arguments.length?raw().color().blue():update(new a(raw().color().blue(b)))},object.h=function(b){return 0===arguments.length?raw().color().hue():update(new a(raw().color().hue(b)))},object.s=function(b){return 0===arguments.length?raw().color().saturation():update(new a(raw().color().saturation(b)))},object.v=function(b){return 0===arguments.length?raw().color().value():update(new a(raw().color().value(b)))},object.alpha=function(b){return 0===arguments.length?raw().color().alpha():update(new a(raw().color().alpha(b)))},object.alpha8=function(b){return 0===arguments.length?raw().color().alpha8():update(new a(raw().color().alpha8(b)))},object.lumin=function(){return raw().color().luminance()},object.lumin8=function(){return raw().color().luminance8()},object.luminFast=function(){return raw().color().luminanceFast()},object.luminFast8=function(){return raw().color().luminanceFast8()},object.gray=function(){return raw().color().grayvalue()},object.gray8=function(){return raw().color().grayvalue8()},object.complement=function(){return update(new a(raw().color().complement()))},object.contrast=function(){return update(new a(raw().color().contrastWhiteBlack()))},object.grayscale=function(){return update(new a(raw().color().contrastGray()))},object.tint=function(c){if(!c)throw b;return update(new a(raw().color().tint(c)))},object.shade=function(c){if(!c)throw b;return update(new a(raw().color().shade(c)))
},object.tone=function(c){if(!c)throw b;return update(new a(raw().color().tone(c)))},object.scale=function(c){if(!c)throw b;return update(new a(raw().color().scale(c)))},object.blend=function(c,d){if(!c&&!d)throw b;return update(new a(raw().color().blend(c,d)))},object.add=function(c){if(!c)throw b;return update(new a(raw().color().add(c)))},object.sub=function(c){if(!c)throw b;return update(new a(raw().color().subtract(c)))},object.mul=function(c){if(!c)throw b;return update(new a(raw().color().multiply(c)))},object.xor=function(c){if(!c)throw b;return update(new a(raw().color().xor(c)))}})}(),function(){"use strict";JS3.ex.op("mathOperations",{objectType:["variable","rule"],dataType:"number"},function(){var a="invalid argument";object.add=function(b){if(!b)throw a;return update(raw()+b)},object.sub=function(b){if(!b)throw a;return update(raw()-b)},object.mul=function(b){if(!b)throw a;return update(raw()*b)},object.div=function(b){if(!b)throw a;return update(raw()/b)},object.mod=function(b){if(!b)throw a;return update(raw()%b)},object.reverseSign=function(){return update(Math.abs(-1*raw()))},object.abs=function(){return update(Math.abs(raw()))},object.acos=function(){return update(Math.acos(raw()))},object.asin=function(){return update(Math.asin(raw()))},object.atan=function(){return update(Math.atan(raw()))},object.ceil=function(){return update(Math.ceil(raw()))},object.cos=function(){return update(Math.cos(raw()))},object.exp=function(){return update(Math.exp(raw()))},object.floor=function(){return update(Math.floor(raw()))},object.log=function(){return update(Math.log(raw()))},object.round=function(){return update(Math.round(raw()))},object.sin=function(){return update(Math.sin(raw()))},object.sqrt=function(){return update(Math.sqrt(raw()))},object.tan=function(){return update(Math.tan(raw()))}})}();